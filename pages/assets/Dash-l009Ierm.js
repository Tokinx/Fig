import{c as $,o as k,e as U,n as j,u as f,f as V,S as se,g as D,w as _,h as Pe,i as Me,j as ht,m as H,k as yt,b as x,l as vt,p as bt,v as wt,C as _t,q as Ct,s as Et,_ as xt,r as R,x as St,B as kt,T as Bt,$ as Tt,P as At,X as Nt,a as h,y as Pt,I as Mt,z as $t,A as fe,d as q,t as L,D as we,F as $e,E as Ie,G as W,H as It,J as G,K as qt,L as Dt,M as Ve,N as Rt,O as Lt,Q as Ut,R as He,U as Ot,V as Ft,W as zt,Y as jt}from"./index-Dptl9rZz.js";import{a as O,b as Je,u as Vt,_ as ce}from"./Input-BqKFCWPm.js";import{_ as X}from"./Label-CmOESbOG.js";const Ht={__name:"CardContent",props:{class:{type:String,default:""}},setup(t){const e=t;return(r,s)=>(k(),$("div",{class:j(f(V)("p-6 pt-0",e.class))},[U(r.$slots,"default")],2))}};function de(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?de=function(e){return typeof e}:de=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yt(t,e){return e={exports:{}},t(e,e.exports),e.exports}var Ke=Yt(function(t,e){/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */(function(r,s){t.exports=s()})(Jt,function(){return o={},r.m=s=[function(n,a){n.exports=function(i){var l;if(i.nodeName==="SELECT")i.focus(),l=i.value;else if(i.nodeName==="INPUT"||i.nodeName==="TEXTAREA"){var d=i.hasAttribute("readonly");d||i.setAttribute("readonly",""),i.select(),i.setSelectionRange(0,i.value.length),d||i.removeAttribute("readonly"),l=i.value}else{i.hasAttribute("contenteditable")&&i.focus();var c=window.getSelection(),v=document.createRange();v.selectNodeContents(i),c.removeAllRanges(),c.addRange(v),l=c.toString()}return l}},function(n,a){function i(){}i.prototype={on:function(l,d,c){var v=this.e||(this.e={});return(v[l]||(v[l]=[])).push({fn:d,ctx:c}),this},once:function(l,d,c){var v=this;function p(){v.off(l,p),d.apply(c,arguments)}return p._=d,this.on(l,p,c)},emit:function(l){for(var d=[].slice.call(arguments,1),c=((this.e||(this.e={}))[l]||[]).slice(),v=0,p=c.length;v<p;v++)c[v].fn.apply(c[v].ctx,d);return this},off:function(l,d){var c=this.e||(this.e={}),v=c[l],p=[];if(v&&d)for(var u=0,m=v.length;u<m;u++)v[u].fn!==d&&v[u].fn._!==d&&p.push(v[u]);return p.length?c[l]=p:delete c[l],this}},n.exports=i,n.exports.TinyEmitter=i},function(n,a,i){var l=i(3),d=i(4);n.exports=function(c,v,p){if(!c&&!v&&!p)throw new Error("Missing required arguments");if(!l.string(v))throw new TypeError("Second argument must be a String");if(!l.fn(p))throw new TypeError("Third argument must be a Function");if(l.node(c))return b=v,A=p,(w=c).addEventListener(b,A),{destroy:function(){w.removeEventListener(b,A)}};if(l.nodeList(c))return P=c,C=v,S=p,Array.prototype.forEach.call(P,function(N){N.addEventListener(C,S)}),{destroy:function(){Array.prototype.forEach.call(P,function(N){N.removeEventListener(C,S)})}};if(l.string(c))return u=c,m=v,E=p,d(document.body,u,m,E);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var u,m,E,P,C,S,w,b,A}},function(n,a){a.node=function(i){return i!==void 0&&i instanceof HTMLElement&&i.nodeType===1},a.nodeList=function(i){var l=Object.prototype.toString.call(i);return i!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in i&&(i.length===0||a.node(i[0]))},a.string=function(i){return typeof i=="string"||i instanceof String},a.fn=function(i){return Object.prototype.toString.call(i)==="[object Function]"}},function(n,a,i){var l=i(5);function d(c,v,p,u,m){var E=(function(P,C,S,w){return function(b){b.delegateTarget=l(b.target,C),b.delegateTarget&&w.call(P,b)}}).apply(this,arguments);return c.addEventListener(p,E,m),{destroy:function(){c.removeEventListener(p,E,m)}}}n.exports=function(c,v,p,u,m){return typeof c.addEventListener=="function"?d.apply(null,arguments):typeof p=="function"?d.bind(null,document).apply(null,arguments):(typeof c=="string"&&(c=document.querySelectorAll(c)),Array.prototype.map.call(c,function(E){return d(E,v,p,u,m)}))}},function(n,a){if(typeof Element<"u"&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}n.exports=function(l,d){for(;l&&l.nodeType!==9;){if(typeof l.matches=="function"&&l.matches(d))return l;l=l.parentNode}}},function(n,a,i){i.r(a);var l=i(0),d=i.n(l),c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};function v(g,y){for(var B=0;B<y.length;B++){var M=y[B];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(g,M.key,M)}}function p(g){(function(y,B){if(!(y instanceof B))throw new TypeError("Cannot call a class as a function")})(this,p),this.resolveOptions(g),this.initSelection()}var u=(function(g,y,B){return y&&v(g.prototype,y),g}(p,[{key:"resolveOptions",value:function(g){var y=0<arguments.length&&g!==void 0?g:{};this.action=y.action,this.container=y.container,this.emitter=y.emitter,this.target=y.target,this.text=y.text,this.trigger=y.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var g=this,y=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return g.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[y?"right":"left"]="-9999px";var B=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=B+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=d()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=d()(this.target),this.copyText()}},{key:"copyText",value:function(){var g=void 0;try{g=document.execCommand(this.action)}catch{g=!1}this.handleResult(g)}},{key:"handleResult",value:function(g){this.emitter.emit(g?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(g){var y=0<arguments.length&&g!==void 0?g:"copy";if(this._action=y,this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(g){if(g!==void 0){if(!g||(g===void 0?"undefined":c(g))!=="object"||g.nodeType!==1)throw new Error('Invalid "target" value, use a valid Element');if(this.action==="copy"&&g.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(g.hasAttribute("readonly")||g.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);this._target=g}},get:function(){return this._target}}]),p),m=i(1),E=i.n(m),P=i(2),C=i.n(P),S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},w=function(g,y,B){return y&&b(g.prototype,y),B&&b(g,B),g};function b(g,y){for(var B=0;B<y.length;B++){var M=y[B];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(g,M.key,M)}}var A=(function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);g.prototype=Object.create(y&&y.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(g,y):g.__proto__=y)}(N,E.a),w(N,[{key:"resolveOptions",value:function(g){var y=0<arguments.length&&g!==void 0?g:{};this.action=typeof y.action=="function"?y.action:this.defaultAction,this.target=typeof y.target=="function"?y.target:this.defaultTarget,this.text=typeof y.text=="function"?y.text:this.defaultText,this.container=S(y.container)==="object"?y.container:document.body}},{key:"listenClick",value:function(g){var y=this;this.listener=C()(g,"click",function(B){return y.onClick(B)})}},{key:"onClick",value:function(g){var y=g.delegateTarget||g.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u({action:this.action(y),target:this.target(y),text:this.text(y),container:this.container,trigger:y,emitter:this})}},{key:"defaultAction",value:function(g){return I("action",g)}},{key:"defaultTarget",value:function(g){var y=I("target",g);if(y)return document.querySelector(y)}},{key:"defaultText",value:function(g){return I("text",g)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(g){var y=0<arguments.length&&g!==void 0?g:["copy","cut"],B=typeof y=="string"?[y]:y,M=!!document.queryCommandSupported;return B.forEach(function(z){M=M&&!!document.queryCommandSupported(z)}),M}}]),N);function N(g,y){(function(M,z){if(!(M instanceof z))throw new TypeError("Cannot call a class as a function")})(this,N);var B=function(M,z){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!z||typeof z!="object"&&typeof z!="function"?M:z}(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));return B.resolveOptions(y),B.listenClick(g),B}function I(g,y){var B="data-clipboard-"+g;if(y.hasAttribute(B))return y.getAttribute(B)}a.default=A}],r.c=o,r.d=function(n,a,i){r.o(n,a)||Object.defineProperty(n,a,{enumerable:!0,get:i})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,a){if(1&a&&(n=r(n)),8&a||4&a&&typeof n=="object"&&n&&n.__esModule)return n;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&a&&typeof n!="string")for(var l in n)r.d(i,l,(function(d){return n[d]}).bind(null,l));return i},r.n=function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(a,"a",a),a},r.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},r.p="",r(r.s=6).default;function r(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return s[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var s,o})}),Qt=Kt(Ke);Ke.ClipboardJS;function Gt(t,e,r){var s=document.createElement("button"),o=new Qt(s,{text:function(){return t},action:function(){return"copy"},container:de(e)==="object"?e:document.body});o.on("success",function(n){o.destroy(),r(void 0,n)}),o.on("error",function(n){o.destroy(),r(n,void 0)}),document.body.appendChild(s),s.click(),document.body.removeChild(s)}const Wt={__name:"DropdownMenu",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:e}){const o=se(t,e);return(n,a)=>(k(),D(f(ht),Pe(Me(f(o))),{default:_(()=>[U(n.$slots,"default")]),_:3},16))}},Xt={__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(yt),H({class:"outline-none"},e),{default:_(()=>[U(r.$slots,"default")]),_:3},16))}},Zt={__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const r=t,o=se(r,e);return(n,a)=>(k(),D(f(bt),null,{default:_(()=>[x(f(vt),H({class:[f(V)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r.class)]},f(o)),{default:_(()=>[U(n.$slots,"default")]),_:3},16,["class"])]),_:3}))}},en={__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},inset:{type:Boolean,required:!1},class:{type:String,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(wt),H(e,{class:[f(V)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.inset&&"pl-8",e.class)]}),{default:_(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}},tn={__name:"Popover",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:e}){const o=se(t,e);return(n,a)=>(k(),D(f(_t),Pe(Me(f(o))),{default:_(()=>[U(n.$slots,"default")]),_:3},16))}},nn={__name:"PopoverTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(Ct),H(e,{class:""}),{default:_(()=>[U(r.$slots,"default")]),_:3},16))}},on={__name:"PopoverContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},onPlaced:{type:Function,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},class:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const r=t,o=se(r,e);return(n,a)=>(k(),D(f(xt),null,{default:_(()=>[x(f(Et),H({...f(o),...n.$attrs},{class:f(V)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r.class)}),{default:_(()=>[U(n.$slots,"default")]),_:3},16,["class"])]),_:3}))}},Ye=t=>JSON.parse(JSON.stringify(t)),Qe={url:"",slug:"",displayName:"",notes:"",mode:"redirect"},rn=[{value:"redirect",label:"跳转",description:"302 重定向到目标地址"},{value:"remind",label:"提醒",description:"用户可自行决定是否打开目标链接"},{value:"cloaking",label:"隐藏",description:"隐藏目标地址，让用户只看到其中的短链接"},{value:"proxy",label:"代理",description:"通过服务器加载目标地址并显示"}],T=R({visible:!1,isCreate:!0,formData:Ye(Qe),resolve:()=>{},reject:()=>{}}),_e=t=>{t?T.value.resolve():T.value.reject(),T.value.visible=!1};function pe(t){const e=Ye(Object.assign({},Qe,t));return T.value.isCreate=!e.creation,T.value.formData=e,T.value.visible=!0,new Promise((r,s)=>{T.value.resolve=r,T.value.reject=s})}var ie={},sn=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ge={},F={};let qe;const an=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];F.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};F.getSymbolTotalCodewords=function(e){return an[e]};F.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};F.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');qe=e};F.isKanjiModeEnabled=function(){return typeof qe<"u"};F.toSJIS=function(e){return qe(e)};var he={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},t.from=function(s,o){if(t.isValid(s))return s;try{return e(s)}catch{return o}}})(he);function We(){this.buffer=[],this.length=0}We.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ln=We;function ae(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ae.prototype.set=function(t,e,r,s){const o=t*this.size+e;this.data[o]=r,s&&(this.reservedBit[o]=!0)};ae.prototype.get=function(t,e){return this.data[t*this.size+e]};ae.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};ae.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var un=ae,Xe={};(function(t){const e=F.getSymbolSize;t.getRowColCoords=function(s){if(s===1)return[];const o=Math.floor(s/7)+2,n=e(s),a=n===145?26:Math.ceil((n-13)/(2*o-2))*2,i=[n-7];for(let l=1;l<o-1;l++)i[l]=i[l-1]-a;return i.push(6),i.reverse()},t.getPositions=function(s){const o=[],n=t.getRowColCoords(s),a=n.length;for(let i=0;i<a;i++)for(let l=0;l<a;l++)i===0&&l===0||i===0&&l===a-1||i===a-1&&l===0||o.push([n[i],n[l]]);return o}})(Xe);var Ze={};const cn=F.getSymbolSize,Oe=7;Ze.getPositions=function(e){const r=cn(e);return[[0,0],[r-Oe,0],[0,r-Oe]]};var et={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const n=o.size;let a=0,i=0,l=0,d=null,c=null;for(let v=0;v<n;v++){i=l=0,d=c=null;for(let p=0;p<n;p++){let u=o.get(v,p);u===d?i++:(i>=5&&(a+=e.N1+(i-5)),d=u,i=1),u=o.get(p,v),u===c?l++:(l>=5&&(a+=e.N1+(l-5)),c=u,l=1)}i>=5&&(a+=e.N1+(i-5)),l>=5&&(a+=e.N1+(l-5))}return a},t.getPenaltyN2=function(o){const n=o.size;let a=0;for(let i=0;i<n-1;i++)for(let l=0;l<n-1;l++){const d=o.get(i,l)+o.get(i,l+1)+o.get(i+1,l)+o.get(i+1,l+1);(d===4||d===0)&&a++}return a*e.N2},t.getPenaltyN3=function(o){const n=o.size;let a=0,i=0,l=0;for(let d=0;d<n;d++){i=l=0;for(let c=0;c<n;c++)i=i<<1&2047|o.get(d,c),c>=10&&(i===1488||i===93)&&a++,l=l<<1&2047|o.get(c,d),c>=10&&(l===1488||l===93)&&a++}return a*e.N3},t.getPenaltyN4=function(o){let n=0;const a=o.data.length;for(let l=0;l<a;l++)n+=o.data[l];return Math.abs(Math.ceil(n*100/a/5)-10)*e.N4};function r(s,o,n){switch(s){case t.Patterns.PATTERN000:return(o+n)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return n%3===0;case t.Patterns.PATTERN011:return(o+n)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(n/3))%2===0;case t.Patterns.PATTERN101:return o*n%2+o*n%3===0;case t.Patterns.PATTERN110:return(o*n%2+o*n%3)%2===0;case t.Patterns.PATTERN111:return(o*n%3+(o+n)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}t.applyMask=function(o,n){const a=n.size;for(let i=0;i<a;i++)for(let l=0;l<a;l++)n.isReserved(l,i)||n.xor(l,i,r(o,l,i))},t.getBestMask=function(o,n){const a=Object.keys(t.Patterns).length;let i=0,l=1/0;for(let d=0;d<a;d++){n(d),t.applyMask(d,o);const c=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(d,o),c<l&&(l=c,i=d)}return i}})(et);var ye={};const Y=he,le=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ue=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ye.getBlocksCount=function(e,r){switch(r){case Y.L:return le[(e-1)*4+0];case Y.M:return le[(e-1)*4+1];case Y.Q:return le[(e-1)*4+2];case Y.H:return le[(e-1)*4+3];default:return}};ye.getTotalCodewordsCount=function(e,r){switch(r){case Y.L:return ue[(e-1)*4+0];case Y.M:return ue[(e-1)*4+1];case Y.Q:return ue[(e-1)*4+2];case Y.H:return ue[(e-1)*4+3];default:return}};var tt={},ve={};const oe=new Uint8Array(512),ge=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)oe[r]=e,ge[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)oe[r]=oe[r-255]})();ve.log=function(e){if(e<1)throw new Error("log("+e+")");return ge[e]};ve.exp=function(e){return oe[e]};ve.mul=function(e,r){return e===0||r===0?0:oe[ge[e]+ge[r]]};(function(t){const e=ve;t.mul=function(s,o){const n=new Uint8Array(s.length+o.length-1);for(let a=0;a<s.length;a++)for(let i=0;i<o.length;i++)n[a+i]^=e.mul(s[a],o[i]);return n},t.mod=function(s,o){let n=new Uint8Array(s);for(;n.length-o.length>=0;){const a=n[0];for(let l=0;l<o.length;l++)n[l]^=e.mul(o[l],a);let i=0;for(;i<n.length&&n[i]===0;)i++;n=n.slice(i)}return n},t.generateECPolynomial=function(s){let o=new Uint8Array([1]);for(let n=0;n<s;n++)o=t.mul(o,new Uint8Array([1,e.exp(n)]));return o}})(tt);const nt=tt;function De(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}De.prototype.initialize=function(e){this.degree=e,this.genPoly=nt.generateECPolynomial(this.degree)};De.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const s=nt.mod(r,this.genPoly),o=this.degree-s.length;if(o>0){const n=new Uint8Array(this.degree);return n.set(s,o),n}return s};var dn=De,ot={},Q={},Re={};Re.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var J={};const rt="[0-9]+",fn="[A-Z $%*+\\-./:]+";let re="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";re=re.replace(/u/g,"\\u");const pn="(?:(?![A-Z0-9 $%*+\\-./:]|"+re+`)(?:.|[\r
]))+`;J.KANJI=new RegExp(re,"g");J.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");J.BYTE=new RegExp(pn,"g");J.NUMERIC=new RegExp(rt,"g");J.ALPHANUMERIC=new RegExp(fn,"g");const gn=new RegExp("^"+re+"$"),mn=new RegExp("^"+rt+"$"),hn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");J.testKanji=function(e){return gn.test(e)};J.testNumeric=function(e){return mn.test(e)};J.testAlphanumeric=function(e){return hn.test(e)};(function(t){const e=Re,r=J;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(n,a){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?n.ccBits[0]:a<27?n.ccBits[1]:n.ccBits[2]},t.getBestModeForData=function(n){return r.testNumeric(n)?t.NUMERIC:r.testAlphanumeric(n)?t.ALPHANUMERIC:r.testKanji(n)?t.KANJI:t.BYTE},t.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},t.isValid=function(n){return n&&n.bit&&n.ccBits};function s(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(n,a){if(t.isValid(n))return n;try{return s(n)}catch{return a}}})(Q);(function(t){const e=F,r=ye,s=he,o=Q,n=Re,a=7973,i=e.getBCHDigit(a);function l(p,u,m){for(let E=1;E<=40;E++)if(u<=t.getCapacity(E,m,p))return E}function d(p,u){return o.getCharCountIndicator(p,u)+4}function c(p,u){let m=0;return p.forEach(function(E){const P=d(E.mode,u);m+=P+E.getBitsLength()}),m}function v(p,u){for(let m=1;m<=40;m++)if(c(p,m)<=t.getCapacity(m,u,o.MIXED))return m}t.from=function(u,m){return n.isValid(u)?parseInt(u,10):m},t.getCapacity=function(u,m,E){if(!n.isValid(u))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=o.BYTE);const P=e.getSymbolTotalCodewords(u),C=r.getTotalCodewordsCount(u,m),S=(P-C)*8;if(E===o.MIXED)return S;const w=S-d(E,u);switch(E){case o.NUMERIC:return Math.floor(w/10*3);case o.ALPHANUMERIC:return Math.floor(w/11*2);case o.KANJI:return Math.floor(w/13);case o.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(u,m){let E;const P=s.from(m,s.M);if(Array.isArray(u)){if(u.length>1)return v(u,P);if(u.length===0)return 1;E=u[0]}else E=u;return l(E.mode,E.getLength(),P)},t.getEncodedBits=function(u){if(!n.isValid(u)||u<7)throw new Error("Invalid QR Code version");let m=u<<12;for(;e.getBCHDigit(m)-i>=0;)m^=a<<e.getBCHDigit(m)-i;return u<<12|m}})(ot);var st={};const Be=F,it=1335,yn=21522,Fe=Be.getBCHDigit(it);st.getEncodedBits=function(e,r){const s=e.bit<<3|r;let o=s<<10;for(;Be.getBCHDigit(o)-Fe>=0;)o^=it<<Be.getBCHDigit(o)-Fe;return(s<<10|o)^yn};var at={};const vn=Q;function Z(t){this.mode=vn.NUMERIC,this.data=t.toString()}Z.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Z.prototype.getLength=function(){return this.data.length};Z.prototype.getBitsLength=function(){return Z.getBitsLength(this.data.length)};Z.prototype.write=function(e){let r,s,o;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),o=parseInt(s,10),e.put(o,10);const n=this.data.length-r;n>0&&(s=this.data.substr(r),o=parseInt(s,10),e.put(o,n*3+1))};var bn=Z;const wn=Q,Ce=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ee(t){this.mode=wn.ALPHANUMERIC,this.data=t}ee.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ee.prototype.getLength=function(){return this.data.length};ee.prototype.getBitsLength=function(){return ee.getBitsLength(this.data.length)};ee.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let s=Ce.indexOf(this.data[r])*45;s+=Ce.indexOf(this.data[r+1]),e.put(s,11)}this.data.length%2&&e.put(Ce.indexOf(this.data[r]),6)};var _n=ee;const Cn=Q;function te(t){this.mode=Cn.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}te.getBitsLength=function(e){return e*8};te.prototype.getLength=function(){return this.data.length};te.prototype.getBitsLength=function(){return te.getBitsLength(this.data.length)};te.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var En=te;const xn=Q,Sn=F;function ne(t){this.mode=xn.KANJI,this.data=t}ne.getBitsLength=function(e){return e*13};ne.prototype.getLength=function(){return this.data.length};ne.prototype.getBitsLength=function(){return ne.getBitsLength(this.data.length)};ne.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=Sn.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var kn=ne,lt={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,s,o){var n={},a={};a[s]=0;var i=e.PriorityQueue.make();i.push(s,0);for(var l,d,c,v,p,u,m,E,P;!i.empty();){l=i.pop(),d=l.value,v=l.cost,p=r[d]||{};for(c in p)p.hasOwnProperty(c)&&(u=p[c],m=v+u,E=a[c],P=typeof a[c]>"u",(P||E>m)&&(a[c]=m,i.push(c,m),n[c]=d))}if(typeof o<"u"&&typeof a[o]>"u"){var C=["Could not find a path from ",s," to ",o,"."].join("");throw new Error(C)}return n},extract_shortest_path_from_predecessor_list:function(r,s){for(var o=[],n=s;n;)o.push(n),r[n],n=r[n];return o.reverse(),o},find_path:function(r,s,o){var n=e.single_source_shortest_paths(r,s,o);return e.extract_shortest_path_from_predecessor_list(n,o)},PriorityQueue:{make:function(r){var s=e.PriorityQueue,o={},n;r=r||{};for(n in s)s.hasOwnProperty(n)&&(o[n]=s[n]);return o.queue=[],o.sorter=r.sorter||s.default_sorter,o},default_sorter:function(r,s){return r.cost-s.cost},push:function(r,s){var o={value:r,cost:s};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(lt);var Bn=lt.exports;(function(t){const e=Q,r=bn,s=_n,o=En,n=kn,a=J,i=F,l=Bn;function d(C){return unescape(encodeURIComponent(C)).length}function c(C,S,w){const b=[];let A;for(;(A=C.exec(w))!==null;)b.push({data:A[0],index:A.index,mode:S,length:A[0].length});return b}function v(C){const S=c(a.NUMERIC,e.NUMERIC,C),w=c(a.ALPHANUMERIC,e.ALPHANUMERIC,C);let b,A;return i.isKanjiModeEnabled()?(b=c(a.BYTE,e.BYTE,C),A=c(a.KANJI,e.KANJI,C)):(b=c(a.BYTE_KANJI,e.BYTE,C),A=[]),S.concat(w,b,A).sort(function(I,g){return I.index-g.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function p(C,S){switch(S){case e.NUMERIC:return r.getBitsLength(C);case e.ALPHANUMERIC:return s.getBitsLength(C);case e.KANJI:return n.getBitsLength(C);case e.BYTE:return o.getBitsLength(C)}}function u(C){return C.reduce(function(S,w){const b=S.length-1>=0?S[S.length-1]:null;return b&&b.mode===w.mode?(S[S.length-1].data+=w.data,S):(S.push(w),S)},[])}function m(C){const S=[];for(let w=0;w<C.length;w++){const b=C[w];switch(b.mode){case e.NUMERIC:S.push([b,{data:b.data,mode:e.ALPHANUMERIC,length:b.length},{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.ALPHANUMERIC:S.push([b,{data:b.data,mode:e.BYTE,length:b.length}]);break;case e.KANJI:S.push([b,{data:b.data,mode:e.BYTE,length:d(b.data)}]);break;case e.BYTE:S.push([{data:b.data,mode:e.BYTE,length:d(b.data)}])}}return S}function E(C,S){const w={},b={start:{}};let A=["start"];for(let N=0;N<C.length;N++){const I=C[N],g=[];for(let y=0;y<I.length;y++){const B=I[y],M=""+N+y;g.push(M),w[M]={node:B,lastCount:0},b[M]={};for(let z=0;z<A.length;z++){const K=A[z];w[K]&&w[K].node.mode===B.mode?(b[K][M]=p(w[K].lastCount+B.length,B.mode)-p(w[K].lastCount,B.mode),w[K].lastCount+=B.length):(w[K]&&(w[K].lastCount=B.length),b[K][M]=p(B.length,B.mode)+4+e.getCharCountIndicator(B.mode,S))}}A=g}for(let N=0;N<A.length;N++)b[A[N]].end=0;return{map:b,table:w}}function P(C,S){let w;const b=e.getBestModeForData(C);if(w=e.from(S,b),w!==e.BYTE&&w.bit<b.bit)throw new Error('"'+C+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(b));switch(w===e.KANJI&&!i.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new r(C);case e.ALPHANUMERIC:return new s(C);case e.KANJI:return new n(C);case e.BYTE:return new o(C)}}t.fromArray=function(S){return S.reduce(function(w,b){return typeof b=="string"?w.push(P(b,null)):b.data&&w.push(P(b.data,b.mode)),w},[])},t.fromString=function(S,w){const b=v(S,i.isKanjiModeEnabled()),A=m(b),N=E(A,w),I=l.find_path(N.map,"start","end"),g=[];for(let y=1;y<I.length-1;y++)g.push(N.table[I[y]].node);return t.fromArray(u(g))},t.rawSplit=function(S){return t.fromArray(v(S,i.isKanjiModeEnabled()))}})(at);const be=F,Ee=he,Tn=ln,An=un,Nn=Xe,Pn=Ze,Te=et,Ae=ye,Mn=dn,me=ot,$n=st,In=Q,xe=at;function qn(t,e){const r=t.size,s=Pn.getPositions(e);for(let o=0;o<s.length;o++){const n=s[o][0],a=s[o][1];for(let i=-1;i<=7;i++)if(!(n+i<=-1||r<=n+i))for(let l=-1;l<=7;l++)a+l<=-1||r<=a+l||(i>=0&&i<=6&&(l===0||l===6)||l>=0&&l<=6&&(i===0||i===6)||i>=2&&i<=4&&l>=2&&l<=4?t.set(n+i,a+l,!0,!0):t.set(n+i,a+l,!1,!0))}}function Dn(t){const e=t.size;for(let r=8;r<e-8;r++){const s=r%2===0;t.set(r,6,s,!0),t.set(6,r,s,!0)}}function Rn(t,e){const r=Nn.getPositions(e);for(let s=0;s<r.length;s++){const o=r[s][0],n=r[s][1];for(let a=-2;a<=2;a++)for(let i=-2;i<=2;i++)a===-2||a===2||i===-2||i===2||a===0&&i===0?t.set(o+a,n+i,!0,!0):t.set(o+a,n+i,!1,!0)}}function Ln(t,e){const r=t.size,s=me.getEncodedBits(e);let o,n,a;for(let i=0;i<18;i++)o=Math.floor(i/3),n=i%3+r-8-3,a=(s>>i&1)===1,t.set(o,n,a,!0),t.set(n,o,a,!0)}function Se(t,e,r){const s=t.size,o=$n.getEncodedBits(e,r);let n,a;for(n=0;n<15;n++)a=(o>>n&1)===1,n<6?t.set(n,8,a,!0):n<8?t.set(n+1,8,a,!0):t.set(s-15+n,8,a,!0),n<8?t.set(8,s-n-1,a,!0):n<9?t.set(8,15-n-1+1,a,!0):t.set(8,15-n-1,a,!0);t.set(s-8,8,1,!0)}function Un(t,e){const r=t.size;let s=-1,o=r-1,n=7,a=0;for(let i=r-1;i>0;i-=2)for(i===6&&i--;;){for(let l=0;l<2;l++)if(!t.isReserved(o,i-l)){let d=!1;a<e.length&&(d=(e[a]>>>n&1)===1),t.set(o,i-l,d),n--,n===-1&&(a++,n=7)}if(o+=s,o<0||r<=o){o-=s,s=-s;break}}}function On(t,e,r){const s=new Tn;r.forEach(function(l){s.put(l.mode.bit,4),s.put(l.getLength(),In.getCharCountIndicator(l.mode,t)),l.write(s)});const o=be.getSymbolTotalCodewords(t),n=Ae.getTotalCodewordsCount(t,e),a=(o-n)*8;for(s.getLengthInBits()+4<=a&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const i=(a-s.getLengthInBits())/8;for(let l=0;l<i;l++)s.put(l%2?17:236,8);return Fn(s,t,e)}function Fn(t,e,r){const s=be.getSymbolTotalCodewords(e),o=Ae.getTotalCodewordsCount(e,r),n=s-o,a=Ae.getBlocksCount(e,r),i=s%a,l=a-i,d=Math.floor(s/a),c=Math.floor(n/a),v=c+1,p=d-c,u=new Mn(p);let m=0;const E=new Array(a),P=new Array(a);let C=0;const S=new Uint8Array(t.buffer);for(let I=0;I<a;I++){const g=I<l?c:v;E[I]=S.slice(m,m+g),P[I]=u.encode(E[I]),m+=g,C=Math.max(C,g)}const w=new Uint8Array(s);let b=0,A,N;for(A=0;A<C;A++)for(N=0;N<a;N++)A<E[N].length&&(w[b++]=E[N][A]);for(A=0;A<p;A++)for(N=0;N<a;N++)w[b++]=P[N][A];return w}function zn(t,e,r,s){let o;if(Array.isArray(t))o=xe.fromArray(t);else if(typeof t=="string"){let d=e;if(!d){const c=xe.rawSplit(t);d=me.getBestVersionForData(c,r)}o=xe.fromString(t,d||40)}else throw new Error("Invalid data");const n=me.getBestVersionForData(o,r);if(!n)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=n;else if(e<n)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+n+`.
`);const a=On(e,r,o),i=be.getSymbolSize(e),l=new An(i);return qn(l,e),Dn(l),Rn(l,e),Se(l,r,0),e>=7&&Ln(l,e),Un(l,a),isNaN(s)&&(s=Te.getBestMask(l,Se.bind(null,l,r))),Te.applyMask(s,l),Se(l,r,s),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:s,segments:o}}Ge.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let s=Ee.M,o,n;return typeof r<"u"&&(s=Ee.from(r.errorCorrectionLevel,Ee.M),o=me.from(r.version),n=Te.from(r.maskPattern),r.toSJISFunc&&be.setToSJISFunction(r.toSJISFunc)),zn(e,o,s,n)};var ut={},Le={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let s=r.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+r);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(n){return[n,n]}))),s.length===6&&s.push("F","F");const o=parseInt(s.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+s.slice(0,6).join("")}}t.getOptions=function(s){s||(s={}),s.color||(s.color={});const o=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,n=s.width&&s.width>=21?s.width:void 0,a=s.scale||4;return{width:n,scale:n?4:a,margin:o,color:{dark:e(s.color.dark||"#000000ff"),light:e(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},t.getScale=function(s,o){return o.width&&o.width>=s+o.margin*2?o.width/(s+o.margin*2):o.scale},t.getImageWidth=function(s,o){const n=t.getScale(s,o);return Math.floor((s+o.margin*2)*n)},t.qrToImageData=function(s,o,n){const a=o.modules.size,i=o.modules.data,l=t.getScale(a,n),d=Math.floor((a+n.margin*2)*l),c=n.margin*l,v=[n.color.light,n.color.dark];for(let p=0;p<d;p++)for(let u=0;u<d;u++){let m=(p*d+u)*4,E=n.color.light;if(p>=c&&u>=c&&p<d-c&&u<d-c){const P=Math.floor((p-c)/l),C=Math.floor((u-c)/l);E=v[i[P*a+C]?1:0]}s[m++]=E.r,s[m++]=E.g,s[m++]=E.b,s[m]=E.a}}})(Le);(function(t){const e=Le;function r(o,n,a){o.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(n,a,i){let l=i,d=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(d=s()),l=e.getOptions(l);const c=e.getImageWidth(n.modules.size,l),v=d.getContext("2d"),p=v.createImageData(c,c);return e.qrToImageData(p.data,n,l),r(v,d,c),v.putImageData(p,0,0),d},t.renderToDataURL=function(n,a,i){let l=i;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const d=t.render(n,a,l),c=l.type||"image/png",v=l.rendererOpts||{};return d.toDataURL(c,v.quality)}})(ut);var ct={};const jn=Le;function ze(t,e){const r=t.a/255,s=e+'="'+t.hex+'"';return r<1?s+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':s}function ke(t,e,r){let s=t+e;return typeof r<"u"&&(s+=" "+r),s}function Vn(t,e,r){let s="",o=0,n=!1,a=0;for(let i=0;i<t.length;i++){const l=Math.floor(i%e),d=Math.floor(i/e);!l&&!n&&(n=!0),t[i]?(a++,i>0&&l>0&&t[i-1]||(s+=n?ke("M",l+r,.5+d+r):ke("m",o,0),o=0,n=!1),l+1<e&&t[i+1]||(s+=ke("h",a),a=0)):o++}return s}ct.render=function(e,r,s){const o=jn.getOptions(r),n=e.modules.size,a=e.modules.data,i=n+o.margin*2,l=o.color.light.a?"<path "+ze(o.color.light,"fill")+' d="M0 0h'+i+"v"+i+'H0z"/>':"",d="<path "+ze(o.color.dark,"stroke")+' d="'+Vn(a,n,o.margin)+'"/>',c='viewBox="0 0 '+i+" "+i+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+c+' shape-rendering="crispEdges">'+l+d+`</svg>
`;return typeof s=="function"&&s(null,p),p};const Hn=sn,Ne=Ge,dt=ut,Jn=ct;function Ue(t,e,r,s,o){const n=[].slice.call(arguments,1),a=n.length,i=typeof n[a-1]=="function";if(!i&&!Hn())throw new Error("Callback required as last argument");if(i){if(a<2)throw new Error("Too few arguments provided");a===2?(o=r,r=e,e=s=void 0):a===3&&(e.getContext&&typeof o>"u"?(o=s,s=void 0):(o=s,s=r,r=e,e=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(r=e,e=s=void 0):a===2&&!e.getContext&&(s=r,r=e,e=void 0),new Promise(function(l,d){try{const c=Ne.create(r,s);l(t(c,e,s))}catch(c){d(c)}})}try{const l=Ne.create(r,s);o(null,t(l,e,s))}catch(l){o(l)}}ie.create=Ne.create;ie.toCanvas=Ue.bind(null,dt.render);ie.toDataURL=Ue.bind(null,dt.renderToDataURL);ie.toString=Ue.bind(null,function(t,e,r){return Jn.render(t,r)});const ft={__name:"Dialog",setup(t){return(e,r)=>(k(),D(f(St),null,{default:_(()=>[U(e.$slots,"default")]),_:3}))}},pt={__name:"DialogHeader",props:{class:{type:String,required:!1}},setup(t){const e=t;return(r,s)=>(k(),$("div",{class:j(f(V)("flex flex-col space-y-2 text-center sm:text-left",e.class))},[U(r.$slots,"default")],2))}},gt={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(kt),H(e,{class:f(V)("text-lg text-foreground font-semibold leading-none tracking-tight",e.class)}),{default:_(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}},mt={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const r=t,o=Bt(e);return(n,a)=>(k(),D(f(Mt),null,{default:_(()=>[x(f(Tt),{class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),x(f(At),H({class:f(V)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",r.class)},{...r,...f(o)}),{default:_(()=>[U(n.$slots,"default"),x(f(Nt),{class:"absolute top-4 right-4 p-0.5 transition-colors rounded-md hover:bg-secondary"},{default:_(()=>[x(f(Pt),{class:"w-4 h-4"}),a[0]||(a[0]=h("span",{class:"sr-only"},"Close",-1))]),_:1,__:[0]})]),_:3},16,["class"])]),_:3}))}},Kn={class:"space-y-6 py-4"},Yn={class:"space-y-2"},Qn={class:"flex gap-2"},Gn={class:"flex-1 bg-gray-100 p-2 rounded text-sm"},Wn={class:"flex flex-col items-center space-y-4"},Xn=["src","alt"],Zn={class:"flex gap-2"},eo={__name:"QRCodeDialog",props:{visible:{type:Boolean,default:!1},shortUrl:{type:String,default:""}},emits:["update:visible"],setup(t,{emit:e}){const r=t,s=e,{toast:o}=$t(),n=R(""),a=R(256),i=R(!1),l=async()=>{if(r.shortUrl){i.value=!0;try{const p={width:a.value,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"};n.value=await ie.toDataURL(r.shortUrl,p)}catch(p){console.error("生成QR码失败:",p),o({title:"生成失败",description:"QR码生成失败，请重试",variant:"destructive"})}finally{i.value=!1}}};fe(()=>r.shortUrl,l,{immediate:!0}),fe(()=>a.value,l);const d=()=>{if(!n.value)return;const p=document.createElement("a");p.download=`qrcode-${r.shortUrl.replace(/[^a-zA-Z0-9]/g,"_")}.png`,p.href=n.value,document.body.appendChild(p),p.click(),document.body.removeChild(p),o({title:"下载成功",description:"QR码已保存到本地"})},c=async()=>{try{await navigator.clipboard.writeText(r.shortUrl),o({title:"复制成功",description:"短链接已复制到剪贴板"})}catch(p){console.error("复制链接失败:",p),o({title:"复制失败",description:"链接复制失败，请手动复制",variant:"destructive"})}},v=()=>{s("update:visible",!1)};return(p,u)=>(k(),D(f(ft),{open:t.visible,"onUpdate:open":v},{default:_(()=>[x(f(mt),{class:"max-w-xl"},{default:_(()=>[x(f(pt),null,{default:_(()=>[x(f(gt),{class:"flex items-center gap-2"},{default:_(()=>u[3]||(u[3]=[h("i",{class:"icon-[material-symbols--qr-code-rounded] text-xl"},null,-1),q(" QR码分享 ",-1)])),_:1,__:[3]})]),_:1}),h("div",Kn,[h("div",Yn,[x(f(X),null,{default:_(()=>u[4]||(u[4]=[q("短链接",-1)])),_:1,__:[4]}),h("div",Qn,[h("code",Gn,L(t.shortUrl),1),x(f(O),{variant:"outline",onClick:c,class:"shrink-0"},{default:_(()=>u[5]||(u[5]=[h("i",{class:"icon-[material-symbols--content-copy] mr-1"},null,-1),q(" 复制 ",-1)])),_:1,__:[5]})])]),h("div",Wn,[x(f(Je),{class:"p-4 flex justify-center"},{default:_(()=>[x(f(Ht),{class:"p-0"},{default:_(()=>[i.value?(k(),$("div",{key:0,class:"flex items-center justify-center",style:we({width:a.value+"px",height:a.value+"px"})},u[6]||(u[6]=[h("div",{class:"flex flex-col items-center gap-2"},[h("i",{class:"icon-[material-symbols--progress-activity] animate-spin text-2xl"}),h("span",{class:"text-sm text-gray-500"},"生成中...")],-1)]),4)):n.value?(k(),$("img",{key:1,src:n.value,alt:`QR码: ${t.shortUrl}`,class:"block mx-auto",style:we({width:a.value+"px",height:a.value+"px"})},null,12,Xn)):(k(),$("div",{key:2,class:"flex items-center justify-center bg-gray-100 rounded",style:we({width:a.value+"px",height:a.value+"px"})},u[7]||(u[7]=[h("span",{class:"text-gray-500"},"暂无QR码",-1)]),4))]),_:1})]),_:1}),h("div",Zn,[x(f(O),{variant:"outline",size:"sm",onClick:d,disabled:!n.value},{default:_(()=>u[8]||(u[8]=[h("i",{class:"icon-[material-symbols--download] mr-1 text-lg"},null,-1),q(" 下载 ",-1)])),_:1,__:[8]},8,["disabled"]),x(f(O),{variant:"outline",size:"sm",class:j([a.value===128&&"bg-primary text-primary-foreground"]),onClick:u[0]||(u[0]=m=>a.value=128)},{default:_(()=>u[9]||(u[9]=[q(" 小 ",-1)])),_:1,__:[9]},8,["class"]),x(f(O),{variant:"outline",size:"sm",class:j([a.value===256&&"bg-primary text-primary-foreground"]),onClick:u[1]||(u[1]=m=>a.value=256)},{default:_(()=>u[10]||(u[10]=[q(" 中 ",-1)])),_:1,__:[10]},8,["class"]),x(f(O),{variant:"outline",size:"sm",class:j([a.value===512&&"bg-primary text-primary-foreground"]),onClick:u[2]||(u[2]=m=>a.value=512)},{default:_(()=>u[11]||(u[11]=[q(" 大 ",-1)])),_:1,__:[11]},8,["class"])])])])]),_:1})]),_:1},8,["open"]))}},to={class:"p-5"},no={class:"flex flex-col space-y-2"},oo={class:"flex flex-col space-y-1 min-w-0 flex-1"},ro={class:"flex items-center justify-between"},so={class:"font-semibold truncate text-blue-500 hover:underline"},io={class:"flex items-center space-x-1 ml-3"},ao={key:0,class:"icon-[material-symbols--content-copy-outline-rounded] h-4 w-4"},lo={key:1,class:"icon-[material-symbols--check] h-4 w-4"},uo={key:2,class:"icon-[material-symbols--close] h-4 w-4"},co={class:"text-xs text-muted-foreground truncate"},fo={class:"flex items-center text-xs text-muted-foreground space-x-1"},po={class:"capitalize bg-secondary px-2 h-5 rounded-sm text-xs font-medium flex items-center"},go={key:0,class:"capitalize bg-secondary px-2 h-5 rounded-sm text-xs font-medium flex items-center"},mo={key:1},ho={class:"overflow-auto text-wrap"},yo={__name:"SlugCard",props:{item:{type:Object,required:!0}},emits:["refresh"],setup(t,{emit:e}){const r=e,o=R(t.item),n=`${location.protocol}//${location.host}/${o.value.slug}`,a=R(null),i=async()=>{Gt(n,void 0,(p,u)=>{a.value=!p}),setTimeout(()=>{a.value=null},1e3)},l=R(!1),d=[{name:"Edit",icon:"icon-[material-symbols--edit]",operate:"edit"},{name:"QR Code",icon:"icon-[material-symbols--qr-code]",operate:"qr-code"},{name:"Duplicate",icon:"icon-[material-symbols--content-copy]",operate:"duplicate"},{name:"Delete",icon:"icon-[material-symbols--delete]",operate:"delete",class:"!text-destructive hover:!bg-destructive hover:!text-destructive-foreground"}],c=()=>{r("refresh"),G({title:"操作成功",description:`短链接 ${o.value.slug} 已更新`})},v=async(p,u)=>{switch(p){case"edit":pe({...o.value,value:void 0,key:void 0}).then(c).catch(()=>{});break;case"duplicate":pe({...o.value,value:void 0,key:void 0,creation:void 0,slug:`${o.value.slug}-copy`}).then(c).catch(()=>{});break;case"qr-code":l.value=!0;break;case"delete":fetch("/api/?action=delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:o.value.slug})}).then(m=>m.json()).then(m=>{console.log(m),m.code===0?(G({title:"删除成功",description:`短链接 ${o.value.slug} 已删除`}),r("refresh")):G({title:"删除失败",description:m.msg||"删除操作失败，请重试",variant:"destructive"})}).catch(()=>{G({title:"删除失败",description:"网络错误，请重试",variant:"destructive"})});break;default:It({title:"Error",description:"Unknown operate"});break}};return(p,u)=>(k(),D(f(Je),{class:"transition-all duration-200 rounded-xl shadow-sm hover:shadow-md border-border"},{default:_(()=>[h("div",to,[h("div",no,[h("div",oo,[h("div",ro,[h("h3",so,[h("a",{href:n,target:"_blank"},L(o.value.displayName||o.value.slug),1)]),h("div",io,[x(f(O),{variant:"ghost",size:"icon",onClick:i,class:j(["h-6 w-6 shrink-0 text-muted-foreground",a.value&&"!text-green-600 !bg-green-50"])},{default:_(()=>[a.value==null?(k(),$("i",ao)):a.value?(k(),$("i",lo)):(k(),$("i",uo))]),_:1},8,["class"]),x(f(Wt),null,{default:_(()=>[x(f(Xt),{"as-child":""},{default:_(()=>[x(f(O),{variant:"ghost",size:"icon",class:"h-6 w-6 shrink-0 text-muted-foreground hover:text-foreground"},{default:_(()=>u[1]||(u[1]=[h("i",{class:"icon-[material-symbols--more-vert] h-4 w-4"},null,-1)])),_:1,__:[1]})]),_:1}),x(f(Zt),{align:"end",class:"shadow-sm"},{default:_(()=>[(k(),$($e,null,Ie(d,m=>x(f(en),{key:m.operate,class:j(["flex items-center gap-2 cursor-pointer text-muted-foreground",m.class]),onClick:E=>v(m.operate,m.value)},{default:_(()=>[h("i",{class:j(m.icon+" h-4 w-4")},null,2),h("span",null,L(m.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})])]),h("p",co,L(o.value.url),1)]),h("div",fo,[h("span",po,L(o.value.mode),1),o.value.displayName?(k(),$("span",go,L(o.value.slug),1)):W("",!0),o.value.notes?(k(),$("div",mo,[x(f(tn),null,{default:_(()=>[x(f(nn),{"as-child":""},{default:_(()=>u[2]||(u[2]=[h("span",{class:"capitalize bg-secondary px-2 h-5 rounded-sm text-xs font-medium flex items-center border cursor-pointer hover:bg-slate-200"}," Notes ",-1)])),_:1,__:[2]}),x(f(on),{class:"text-xs"},{default:_(()=>[h("pre",ho,L(o.value.notes),1)]),_:1})]),_:1})])):W("",!0)])])]),x(eo,{visible:l.value,"onUpdate:visible":u[0]||(u[0]=m=>l.value=m),"short-url":n},null,8,["visible"])]),_:1}))}},je={__name:"Textarea",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const r=t,o=Vt(r,"modelValue",e,{passive:!0,defaultValue:r.defaultValue});return(n,a)=>qt((k(),$("textarea",{"onUpdate:modelValue":a[0]||(a[0]=i=>Ve(o)?o.value=i:null),class:j(f(V)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n.$attrs.class??""))},null,2)),[[Dt,f(o)]])}},vo={__name:"Tabs",props:{defaultValue:{type:String,required:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},activationMode:{type:String,required:!1},modelValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const o=se(t,e);return(n,a)=>(k(),D(f(Rt),Pe(Me(f(o))),{default:_(()=>[U(n.$slots,"default")]),_:3},16))}},bo={__name:"TabsTrigger",props:{value:{type:String,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(Lt),H(e,{class:f(V)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e.class)}),{default:_(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}},wo={__name:"TabsList",props:{loop:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},setup(t){const e=t;return(r,s)=>(k(),D(f(Ut),H(e,{class:f(V)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e.class)}),{default:_(()=>[U(r.$slots,"default")]),_:3},16,["class"]))}},_o={class:"space-y-6"},Co={class:"space-y-4"},Eo={class:"space-y-2"},xo={class:"grid gap-4 grid-cols-1 sm:grid-cols-2"},So={class:"space-y-2"},ko={class:"flex mt-2 gap-2"},Bo={class:"flex w-full relative"},To={key:0,class:"icon-[material-symbols--autorenew-outline-rounded] text-base"},Ao={key:1,class:"icon-[material-symbols--progress-activity] animate-spin text-base"},No={class:"space-y-2"},Po={class:"space-y-2"},Mo={class:"flex gap-2"},$o={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Io={class:"space-y-1 flex flex-col height-full"},qo={class:"flex items-center justify-end gap-3 pt-4"},Do={key:0,class:"icon-[material-symbols--refresh] animate-spin mr-2"},Ro={__name:"CreateLinkDialog",setup(t){const e=location.host,r=R({randomize:!1,create:!1}),s=async()=>{r.value.randomize=!0,fetch("/api/?action=randomize",{method:"POST",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(({data:i})=>{setTimeout(()=>{T.value.formData.slug=i},500)}).finally(()=>{setTimeout(()=>{r.value.randomize=!1},500)})},o=i=>{T.value.formData.mode=i};fe(()=>T.value.visible,i=>{i&&T.value.isCreate&&!T.value.formData.slug&&Ot(()=>{s()})});const n=async()=>{r.value.create=!0,fetch("/api/?action=save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(T.value.formData)}).then(i=>i.json()).then(i=>{console.log(i),i.code===0?(G({title:T.value.formData.creation?"更新成功":"创建成功",description:`短链接 ${T.value.formData.slug} ${T.value.formData.creation?"已更新":"已创建"}`}),_e(!0)):(G({title:T.value.formData.creation?"更新失败":"创建失败",description:i.msg||"操作失败，请重试",variant:"destructive"}),console.error("Error creating link:",i.msg))}).catch(i=>{G({title:"操作失败",description:"网络错误，请检查连接后重试",variant:"destructive"}),console.error("Network error:",i)}).finally(()=>{r.value.create=!1})},a=()=>T.value.formData.url&&T.value.formData.url.trim();return(i,l)=>(k(),D(f(ft),{open:f(T).visible,"onUpdate:open":l[6]||(l[6]=d=>!d&&f(_e)(!1))},{default:_(()=>[x(f(mt),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:_(()=>[x(f(pt),null,{default:_(()=>[x(f(gt),{class:"text-xl font-semibold"},{default:_(()=>[q(L(f(T).formData.creation?"编辑短链接":"创建短链接"),1)]),_:1})]),_:1}),h("div",_o,[h("div",Co,[h("div",Eo,[x(f(X),{for:"url",class:"text-sm font-medium"},{default:_(()=>l[7]||(l[7]=[q("目标链接 *",-1)])),_:1,__:[7]}),x(f(je),{id:"url",modelValue:f(T).formData.url,"onUpdate:modelValue":l[0]||(l[0]=d=>f(T).formData.url=d),placeholder:"https://example.com",class:"min-h-[80px] resize-none",disabled:r.value.create},null,8,["modelValue","disabled"])]),h("div",xo,[h("div",So,[x(f(X),null,{default:_(()=>l[8]||(l[8]=[q("短链接",-1)])),_:1,__:[8]}),h("div",ko,[h("div",Bo,[x(f(ce),{type:"text",placeholder:"https://example.com",class:"w-[120px] rounded-r-none bg-slate-100",modelValue:f(e),"onUpdate:modelValue":l[1]||(l[1]=d=>Ve(e)?e.value=d:null),readonly:""},null,8,["modelValue"]),x(f(ce),{type:"text",class:j(["rounded-l-none ml-[-1px]",!f(T).isCreate&&"bg-slate-100"]),modelValue:f(T).formData.slug,"onUpdate:modelValue":l[2]||(l[2]=d=>f(T).formData.slug=d),placeholder:"短链接",disabled:!f(T).isCreate,required:"",pattern:"[a-zA-Z0-9_\\-.]{6,24}"},null,8,["class","modelValue","disabled"]),x(f(O),{type:"button",variant:"outline",size:"icon",class:j(["absolute top-1/2 right-2 -translate-y-1/2 w-6 h-6 flex-shrink-0 active:scale-95",!f(T).isCreate&&"bg-slate-100"]),disabled:!f(T).isCreate,onClick:He(s,["prevent"])},{default:_(()=>[r.value.randomize?(k(),$("i",Ao)):(k(),$("i",To))]),_:1},8,["class","disabled"])])])]),h("div",No,[x(f(X),{for:"displayName",class:"text-sm font-medium"},{default:_(()=>l[9]||(l[9]=[q("显示名称",-1)])),_:1,__:[9]}),x(f(ce),{id:"displayName",modelValue:f(T).formData.displayName,"onUpdate:modelValue":l[3]||(l[3]=d=>f(T).formData.displayName=d),placeholder:"为您的短链接添加一个便于识别的名称",disabled:r.value.create},null,8,["modelValue","disabled"])])]),h("div",Po,[x(f(X),{for:"mode",class:"text-sm font-medium"},{default:_(()=>l[10]||(l[10]=[q("跳转模式",-1)])),_:1,__:[10]}),h("div",Mo,[x(f(vo),{"default-value":f(T).formData.mode,class:"w-full"},{default:_(()=>[x(f(wo),{class:"grid w-full grid-cols-4"},{default:_(()=>[(k(!0),$($e,null,Ie(f(rn),d=>(k(),D(f(bo),{key:d.value,value:d.value,onClick:c=>o(d.value)},{default:_(()=>[q(L(d.label),1)]),_:2},1032,["value","onClick"]))),128))]),_:1})]),_:1},8,["default-value"])])]),h("div",$o,[h("div",Io,[x(f(X),{for:"notes",class:"text-sm font-medium"},{default:_(()=>l[11]||(l[11]=[q("备注",-1)])),_:1,__:[11]}),x(f(je),{id:"notes",modelValue:f(T).formData.notes,"onUpdate:modelValue":l[4]||(l[4]=d=>f(T).formData.notes=d),placeholder:"为这个短链接添加一些备注信息...",class:"resize-none flex-1",disabled:r.value.create},null,8,["modelValue","disabled"])])])]),h("div",qo,[x(f(O),{variant:"outline",onClick:l[5]||(l[5]=d=>f(_e)(!1)),disabled:r.value.create},{default:_(()=>l[12]||(l[12]=[q(" 取消 ",-1)])),_:1,__:[12]},8,["disabled"]),x(f(O),{onClick:n,disabled:!a()||r.value.create,class:"min-w-[100px]"},{default:_(()=>[r.value.create?(k(),$("i",Do)):W("",!0),q(" "+L(f(T).formData.creation?"更新":"创建"),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["open"]))}},Lo={class:"w-full"},Uo={key:0,class:"mb-6 p-4 bg-muted/50 rounded-lg"},Oo={class:"flex items-center justify-between"},Fo={class:"text-sm text-muted-foreground"},zo={class:"font-medium text-foreground"},jo={class:"font-medium text-foreground"},Vo={key:1,class:"mb-6 text-center text-muted-foreground"},Ho={key:2,class:"text-center py-24"},Jo={class:"max-w-md mx-auto space-y-6"},Ko={class:"space-y-2"},Yo={class:"text-xl font-semibold tracking-tight"},Qo={class:"text-muted-foreground"},Go={key:0},Wo={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Xo={key:4,class:"mt-8 text-center"},Zo={key:0,class:"flex items-center justify-center gap-2 py-4 text-muted-foreground"},er={key:1,class:"py-4 text-muted-foreground text-sm flex items-center justify-center"},tr={key:2,class:"py-4 text-muted-foreground text-sm flex items-center justify-center"},nr={__name:"SlugItems",setup(t,{expose:e}){const r=R(!1),s=R(!1),o=R([]),n=R({count:0,page:1,rows:10}),a=R(""),i=R(!0),l=async(p="")=>{const u=Math.random().toString(36).substring(2);r.value=!0,n.value.page=1,o.value=[],i.value=!0;const m={rows:n.value.rows,page:n.value.page};p&&(m.search=p),fetch("/api/?action=get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(E=>E.json()).then(({data:E})=>{const{count:P,results:C}=E||{};n.value.count=P;const S=(C||[]).map(w=>{let b={};try{b=JSON.parse(w.value)}catch(A){console.log(A)}return{...w,...b,oid:u+w.key}});o.value=S,i.value=S.length===n.value.rows&&o.value.length<P}).finally(()=>{r.value=!1})},d=async()=>{if(s.value||!i.value)return;s.value=!0,n.value.page+=1;const p={rows:n.value.rows,page:n.value.page};a.value&&(p.search=a.value),fetch("/api/?action=get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}).then(u=>u.json()).then(({data:u})=>{const{results:m}=u||{},E=Math.random().toString(36).substring(2),P=(m||[]).map(C=>{let S={};try{S=JSON.parse(C.value)}catch(w){console.log(w)}return{...C,...S,oid:E+C.key}});P.length>0?(o.value.push(...P),i.value=P.length===n.value.rows&&o.value.length<n.value.count):i.value=!1}).finally(()=>{s.value=!1})},c=p=>{a.value=p,l(p)},v=()=>{const{scrollTop:p,scrollHeight:u,clientHeight:m}=document.documentElement;p+m>=u-200&&i.value&&!s.value&&!r.value&&d()};return Ft(()=>{l(),window.addEventListener("scroll",v)}),zt(()=>{window.removeEventListener("scroll",v)}),e({refresh:l,search:c}),(p,u)=>(k(),$("div",Lo,[a.value?(k(),$("div",Uo,[h("div",Oo,[h("div",Fo,[u[1]||(u[1]=q(' 正在搜索 "',-1)),h("span",zo,L(a.value),1),u[2]||(u[2]=q('"，找到 ',-1)),h("span",jo,L(n.value.count),1),u[3]||(u[3]=q(" 条结果 ",-1))])])])):W("",!0),r.value?(k(),$("div",Vo,u[4]||(u[4]=[h("div",{class:"flex items-center justify-center gap-2"},[h("i",{class:"icon-[material-symbols--progress-activity] animate-spin h-4 w-4"}),h("span",null,"搜索中...")],-1)]))):o.value.length===0?(k(),$("div",Ho,[h("div",Jo,[u[6]||(u[6]=h("div",{class:"w-20 h-20 mx-auto rounded-full bg-muted flex items-center justify-center"},[h("i",{class:"icon-[material-symbols--link] h-10 w-10 text-muted-foreground"})],-1)),h("div",Ko,[h("h3",Yo,L(a.value?"没有找到匹配的结果":"还没有短链接"),1),h("p",Qo,L(a.value?"尝试使用其他关键词搜索":"点击下方按钮创建你的第一个短链接"),1)]),a.value?W("",!0):(k(),$("div",Go,[x(f(O),{onClick:f(pe),class:"gap-2"},{default:_(()=>u[5]||(u[5]=[h("i",{class:"icon-[material-symbols--add] h-4 w-4"},null,-1),q(" 创建短链接 ",-1)])),_:1,__:[5]},8,["onClick"])]))])])):(k(),$("div",Wo,[(k(!0),$($e,null,Ie(o.value,m=>(k(),D(yo,H({key:m.oid},{ref_for:!0},{item:m},{onRefresh:u[0]||(u[0]=()=>l(a.value))}),null,16))),128))])),o.value.length>0?(k(),$("div",Xo,[s.value?(k(),$("div",Zo,u[7]||(u[7]=[h("i",{class:"icon-[material-symbols--progress-activity] animate-spin h-4 w-4"},null,-1),h("span",null,"正在加载更多...",-1)]))):i.value?(k(),$("div",tr,u[9]||(u[9]=[h("i",{class:"icon-[material-symbols--keyboard-arrow-down] h-4 w-4 mr-1"},null,-1),q(" 向下滚动加载更多 ",-1)]))):(k(),$("div",er,[u[8]||(u[8]=h("i",{class:"icon-[material-symbols--check-circle] h-4 w-4 mr-1"},null,-1)),q(" 已显示全部 "+L(o.value.length)+" 条记录 ",1)]))])):W("",!0),x(Ro)]))}},or={class:"min-h-screen bg-background"},rr={class:"container"},sr={class:"border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60"},ir={class:"flex h-16 items-center justify-between"},ar={class:"text-xl font-semibold tracking-tight"},lr={class:"flex items-center gap-3"},ur={class:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1"},cr={class:"container py-6"},gr={__name:"Dash",setup(t){const e=location.host,r=R(null),s=R(!1),o=R(""),n=R(""),a=()=>{pe().then(()=>{r.value&&r.value.refresh(o.value.trim())}).catch(()=>{})},i=()=>{r.value&&o.value.trim()!==n.value&&(n.value=o.value.trim(),r.value.search(n.value))},l=()=>{o.value="",n.value="",r.value&&r.value.search("")};return fe(o,d=>{!d.trim()&&n.value&&l()}),(d,c)=>(k(),$("div",or,[h("div",rr,[h("div",sr,[h("div",ir,[h("h1",ar,L(f(e)),1),h("div",lr,[h("form",{class:"relative w-9",onSubmit:He(i,["prevent"])},[x(f(ce),{id:"search",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=v=>o.value=v),onFocus:c[1]||(c[1]=v=>s.value=!0),onBlur:c[2]||(c[2]=v=>s.value=!1),onKeydown:jt(i,["enter"]),autocomplete:"off"},null,8,["modelValue"]),h("div",ur,[o.value?(k(),D(f(O),{key:0,type:"button",variant:"ghost",size:"icon",class:"h-6 w-6",onClick:l},{default:_(()=>c[3]||(c[3]=[h("i",{class:"icon-[material-symbols--close] h-3 w-3"},null,-1)])),_:1,__:[3]})):W("",!0)]),c[4]||(c[4]=h("div",{class:"absolute inset-0 flex items-center justify-center pointer-events-none"},[h("i",{class:"icon-[material-symbols--search] text-xl"})],-1))],32),x(f(O),{onClick:a,class:"gap-2 shrink-0 px-2 sm:px-4"},{default:_(()=>c[5]||(c[5]=[h("i",{class:"icon-[material-symbols--add] text-xl"},null,-1),h("span",{class:"hidden sm:inline"},"创建短链接",-1)])),_:1,__:[5]})])])])]),h("main",cr,[x(nr,{ref_key:"table",ref:r},null,512)])]))}};export{gr as default};
