import{S as He,c as F,o as k,w as M,r as Z,h as dt,i as ft,u as E,j as ht,m as oe,k as gt,f as N,l as mt,a as me,p as pt,v as yt,b as L,q as vt,T as bt,$ as wt,P as _t,X as Ct,e as p,s as Et,I as xt,x as kt,y as de,d as A,z as le,t as R,g as $,n as H,F as pe,A as ye,B as W,C as St,D as j,E as Tt,G as Bt,H as At,J as Be,K as ee,L as Nt,M as Mt,N as Pt,O as It,Q as Lt}from"./index-C2rNbX-h.js";import{a as U,b as Rt,u as $t,_ as ue}from"./Input-C1Z_NoxD.js";function ce(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ce=function(n){return typeof n}:ce=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ce(t)}var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ft(t,n){return n={exports:{}},t(n,n.exports),n.exports}var Je=Ft(function(t,n){/*!
 * clipboard.js v2.0.6
 * https://clipboardjs.com/
 * 
 * Licensed MIT © Zeno Rocha
 */(function(a,s){t.exports=s()})(Dt,function(){return o={},a.m=s=[function(e,i){e.exports=function(r){var l;if(r.nodeName==="SELECT")r.focus(),l=r.value;else if(r.nodeName==="INPUT"||r.nodeName==="TEXTAREA"){var f=r.hasAttribute("readonly");f||r.setAttribute("readonly",""),r.select(),r.setSelectionRange(0,r.value.length),f||r.removeAttribute("readonly"),l=r.value}else{r.hasAttribute("contenteditable")&&r.focus();var c=window.getSelection(),w=document.createRange();w.selectNodeContents(r),c.removeAllRanges(),c.addRange(w),l=c.toString()}return l}},function(e,i){function r(){}r.prototype={on:function(l,f,c){var w=this.e||(this.e={});return(w[l]||(w[l]=[])).push({fn:f,ctx:c}),this},once:function(l,f,c){var w=this;function g(){w.off(l,g),f.apply(c,arguments)}return g._=f,this.on(l,g,c)},emit:function(l){for(var f=[].slice.call(arguments,1),c=((this.e||(this.e={}))[l]||[]).slice(),w=0,g=c.length;w<g;w++)c[w].fn.apply(c[w].ctx,f);return this},off:function(l,f){var c=this.e||(this.e={}),w=c[l],g=[];if(w&&f)for(var h=0,b=w.length;h<b;h++)w[h].fn!==f&&w[h].fn._!==f&&g.push(w[h]);return g.length?c[l]=g:delete c[l],this}},e.exports=r,e.exports.TinyEmitter=r},function(e,i,r){var l=r(3),f=r(4);e.exports=function(c,w,g){if(!c&&!w&&!g)throw new Error("Missing required arguments");if(!l.string(w))throw new TypeError("Second argument must be a String");if(!l.fn(g))throw new TypeError("Third argument must be a Function");if(l.node(c))return _=w,T=g,(C=c).addEventListener(_,T),{destroy:function(){C.removeEventListener(_,T)}};if(l.nodeList(c))return u=c,y=w,x=g,Array.prototype.forEach.call(u,function(S){S.addEventListener(y,x)}),{destroy:function(){Array.prototype.forEach.call(u,function(S){S.removeEventListener(y,x)})}};if(l.string(c))return h=c,b=w,d=g,f(document.body,h,b,d);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var h,b,d,u,y,x,C,_,T}},function(e,i){i.node=function(r){return r!==void 0&&r instanceof HTMLElement&&r.nodeType===1},i.nodeList=function(r){var l=Object.prototype.toString.call(r);return r!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in r&&(r.length===0||i.node(r[0]))},i.string=function(r){return typeof r=="string"||r instanceof String},i.fn=function(r){return Object.prototype.toString.call(r)==="[object Function]"}},function(e,i,r){var l=r(5);function f(c,w,g,h,b){var d=(function(u,y,x,C){return function(_){_.delegateTarget=l(_.target,y),_.delegateTarget&&C.call(u,_)}}).apply(this,arguments);return c.addEventListener(g,d,b),{destroy:function(){c.removeEventListener(g,d,b)}}}e.exports=function(c,w,g,h,b){return typeof c.addEventListener=="function"?f.apply(null,arguments):typeof g=="function"?f.bind(null,document).apply(null,arguments):(typeof c=="string"&&(c=document.querySelectorAll(c)),Array.prototype.map.call(c,function(d){return f(d,w,g,h,b)}))}},function(e,i){if(typeof Element<"u"&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(l,f){for(;l&&l.nodeType!==9;){if(typeof l.matches=="function"&&l.matches(f))return l;l=l.parentNode}}},function(e,i,r){r.r(i);var l=r(0),f=r.n(l),c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};function w(m,v){for(var B=0;B<v.length;B++){var P=v[B];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(m,P.key,P)}}function g(m){(function(v,B){if(!(v instanceof B))throw new TypeError("Cannot call a class as a function")})(this,g),this.resolveOptions(m),this.initSelection()}var h=(function(m,v,B){return v&&w(m.prototype,v),m}(g,[{key:"resolveOptions",value:function(m){var v=0<arguments.length&&m!==void 0?m:{};this.action=v.action,this.container=v.container,this.emitter=v.emitter,this.target=v.target,this.text=v.text,this.trigger=v.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var m=this,v=document.documentElement.getAttribute("dir")=="rtl";this.removeFake(),this.fakeHandlerCallback=function(){return m.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[v?"right":"left"]="-9999px";var B=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=B+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=f()(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=f()(this.target),this.copyText()}},{key:"copyText",value:function(){var m=void 0;try{m=document.execCommand(this.action)}catch{m=!1}this.handleResult(m)}},{key:"handleResult",value:function(m){this.emitter.emit(m?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(m){var v=0<arguments.length&&m!==void 0?m:"copy";if(this._action=v,this._action!=="copy"&&this._action!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(m){if(m!==void 0){if(!m||(m===void 0?"undefined":c(m))!=="object"||m.nodeType!==1)throw new Error('Invalid "target" value, use a valid Element');if(this.action==="copy"&&m.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(this.action==="cut"&&(m.hasAttribute("readonly")||m.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`);this._target=m}},get:function(){return this._target}}]),g),b=r(1),d=r.n(b),u=r(2),y=r.n(u),x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},C=function(m,v,B){return v&&_(m.prototype,v),B&&_(m,B),m};function _(m,v){for(var B=0;B<v.length;B++){var P=v[B];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(m,P.key,P)}}var T=(function(m,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);m.prototype=Object.create(v&&v.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(m,v):m.__proto__=v)}(S,d.a),C(S,[{key:"resolveOptions",value:function(m){var v=0<arguments.length&&m!==void 0?m:{};this.action=typeof v.action=="function"?v.action:this.defaultAction,this.target=typeof v.target=="function"?v.target:this.defaultTarget,this.text=typeof v.text=="function"?v.text:this.defaultText,this.container=x(v.container)==="object"?v.container:document.body}},{key:"listenClick",value:function(m){var v=this;this.listener=y()(m,"click",function(B){return v.onClick(B)})}},{key:"onClick",value:function(m){var v=m.delegateTarget||m.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new h({action:this.action(v),target:this.target(v),text:this.text(v),container:this.container,trigger:v,emitter:this})}},{key:"defaultAction",value:function(m){return I("action",m)}},{key:"defaultTarget",value:function(m){var v=I("target",m);if(v)return document.querySelector(v)}},{key:"defaultText",value:function(m){return I("text",m)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(m){var v=0<arguments.length&&m!==void 0?m:["copy","cut"],B=typeof v=="string"?[v]:v,P=!!document.queryCommandSupported;return B.forEach(function(z){P=P&&!!document.queryCommandSupported(z)}),P}}]),S);function S(m,v){(function(P,z){if(!(P instanceof z))throw new TypeError("Cannot call a class as a function")})(this,S);var B=function(P,z){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!z||typeof z!="object"&&typeof z!="function"?P:z}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return B.resolveOptions(v),B.listenClick(m),B}function I(m,v){var B="data-clipboard-"+m;if(v.hasAttribute(B))return v.getAttribute(B)}i.default=T}],a.c=o,a.d=function(e,i,r){a.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},a.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,i){if(1&i&&(e=a(e)),8&i||4&i&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&typeof e!="string")for(var l in e)a.d(r,l,(function(f){return e[f]}).bind(null,l));return r},a.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(i,"a",i),i},a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},a.p="",a(a.s=6).default;function a(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return s[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}var s,o})}),Ot=Ut(Je);Je.ClipboardJS;function zt(t,n,a){var s=document.createElement("button"),o=new Ot(s,{text:function(){return t},action:function(){return"copy"},container:ce(n)==="object"?n:document.body});o.on("success",function(e){o.destroy(),a(void 0,e)}),o.on("error",function(e){o.destroy(),a(e,void 0)}),document.body.appendChild(s),s.click(),document.body.removeChild(s)}const jt={__name:"DropdownMenu",props:{open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1}},emits:["update:open"],setup(t,{emit:n}){const o=He(t,n);return(e,i)=>(k(),F(E(ht),dt(ft(E(o))),{default:M(()=>[Z(e.$slots,"default")]),_:3},16))}},Vt={__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const n=t;return(a,s)=>(k(),F(E(gt),oe({class:"outline-none"},n),{default:M(()=>[Z(a.$slots,"default")]),_:3},16))}},qt={__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1,default:4},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},updatePositionStrategy:{type:String,required:!1},prioritizePosition:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","entryFocus","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const a=t,o=He(a,n);return(e,i)=>(k(),F(E(pt),null,{default:M(()=>[N(E(mt),oe({class:[E(me)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a.class)]},E(o)),{default:M(()=>[Z(e.$slots,"default")]),_:3},16,["class"])]),_:3}))}},Ht={__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},inset:{type:Boolean,required:!1},class:{type:String,required:!1}},setup(t){const n=t;return(a,s)=>(k(),F(E(yt),oe(n,{class:[E(me)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.inset&&"pl-8",n.class)]}),{default:M(()=>[Z(a.$slots,"default")]),_:3},16,["class"]))}},Ie=t=>JSON.parse(JSON.stringify(t)),Le={url:"",slug:"",displayName:"",notes:"",mode:"redirect",passcode:"",clicks:0},Re=[{value:"redirect",label:"跳转",description:"302 重定向到目标地址"},{value:"remind",label:"提醒",description:"用户访问时显示目标地址和备注信息"},{value:"cloaking",label:"隐藏",description:"隐藏目标地址，让用户只看到其中的短链接"},{value:"proxy",label:"代理",description:"通过服务器加载目标地址，同时代理子路径"}],D=L({visible:!1,isCreate:!0,formData:Ie(Le),resolve:()=>{},reject:()=>{}}),Ce=t=>{t?D.value.resolve():D.value.reject(),D.value.visible=!1};function fe(t){const n=Ie(Object.assign({},Le,t));return D.value.isCreate=!n.creation,D.value.formData=n,D.value.visible=!0,new Promise((a,s)=>{D.value.resolve=a,D.value.reject=s})}var re={},Jt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Ke={},O={};let $e;const Kt=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];O.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};O.getSymbolTotalCodewords=function(n){return Kt[n]};O.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n};O.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');$e=n};O.isKanjiModeEnabled=function(){return typeof $e<"u"};O.toSJIS=function(n){return $e(n)};var ve={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}})(ve);function Ye(){this.buffer=[],this.length=0}Ye.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let a=0;a<n;a++)this.putBit((t>>>n-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}};var Yt=Ye;function se(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}se.prototype.set=function(t,n,a,s){const o=t*this.size+n;this.data[o]=a,s&&(this.reservedBit[o]=!0)};se.prototype.get=function(t,n){return this.data[t*this.size+n]};se.prototype.xor=function(t,n,a){this.data[t*this.size+n]^=a};se.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]};var Qt=se,Qe={};(function(t){const n=O.getSymbolSize;t.getRowColCoords=function(s){if(s===1)return[];const o=Math.floor(s/7)+2,e=n(s),i=e===145?26:Math.ceil((e-13)/(2*o-2))*2,r=[e-7];for(let l=1;l<o-1;l++)r[l]=r[l-1]-i;return r.push(6),r.reverse()},t.getPositions=function(s){const o=[],e=t.getRowColCoords(s),i=e.length;for(let r=0;r<i;r++)for(let l=0;l<i;l++)r===0&&l===0||r===0&&l===i-1||r===i-1&&l===0||o.push([e[r],e[l]]);return o}})(Qe);var Ge={};const Gt=O.getSymbolSize,ze=7;Ge.getPositions=function(n){const a=Gt(n);return[[0,0],[a-ze,0],[0,a-ze]]};var Xe={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const e=o.size;let i=0,r=0,l=0,f=null,c=null;for(let w=0;w<e;w++){r=l=0,f=c=null;for(let g=0;g<e;g++){let h=o.get(w,g);h===f?r++:(r>=5&&(i+=n.N1+(r-5)),f=h,r=1),h=o.get(g,w),h===c?l++:(l>=5&&(i+=n.N1+(l-5)),c=h,l=1)}r>=5&&(i+=n.N1+(r-5)),l>=5&&(i+=n.N1+(l-5))}return i},t.getPenaltyN2=function(o){const e=o.size;let i=0;for(let r=0;r<e-1;r++)for(let l=0;l<e-1;l++){const f=o.get(r,l)+o.get(r,l+1)+o.get(r+1,l)+o.get(r+1,l+1);(f===4||f===0)&&i++}return i*n.N2},t.getPenaltyN3=function(o){const e=o.size;let i=0,r=0,l=0;for(let f=0;f<e;f++){r=l=0;for(let c=0;c<e;c++)r=r<<1&2047|o.get(f,c),c>=10&&(r===1488||r===93)&&i++,l=l<<1&2047|o.get(c,f),c>=10&&(l===1488||l===93)&&i++}return i*n.N3},t.getPenaltyN4=function(o){let e=0;const i=o.data.length;for(let l=0;l<i;l++)e+=o.data[l];return Math.abs(Math.ceil(e*100/i/5)-10)*n.N4};function a(s,o,e){switch(s){case t.Patterns.PATTERN000:return(o+e)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return e%3===0;case t.Patterns.PATTERN011:return(o+e)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(e/3))%2===0;case t.Patterns.PATTERN101:return o*e%2+o*e%3===0;case t.Patterns.PATTERN110:return(o*e%2+o*e%3)%2===0;case t.Patterns.PATTERN111:return(o*e%3+(o+e)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}t.applyMask=function(o,e){const i=e.size;for(let r=0;r<i;r++)for(let l=0;l<i;l++)e.isReserved(l,r)||e.xor(l,r,a(o,l,r))},t.getBestMask=function(o,e){const i=Object.keys(t.Patterns).length;let r=0,l=1/0;for(let f=0;f<i;f++){e(f),t.applyMask(f,o);const c=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(f,o),c<l&&(l=c,r=f)}return r}})(Xe);var be={};const J=ve,ae=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ie=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];be.getBlocksCount=function(n,a){switch(a){case J.L:return ae[(n-1)*4+0];case J.M:return ae[(n-1)*4+1];case J.Q:return ae[(n-1)*4+2];case J.H:return ae[(n-1)*4+3];default:return}};be.getTotalCodewordsCount=function(n,a){switch(a){case J.L:return ie[(n-1)*4+0];case J.M:return ie[(n-1)*4+1];case J.Q:return ie[(n-1)*4+2];case J.H:return ie[(n-1)*4+3];default:return}};var Ze={},we={};const te=new Uint8Array(512),he=new Uint8Array(256);(function(){let n=1;for(let a=0;a<255;a++)te[a]=n,he[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)te[a]=te[a-255]})();we.log=function(n){if(n<1)throw new Error("log("+n+")");return he[n]};we.exp=function(n){return te[n]};we.mul=function(n,a){return n===0||a===0?0:te[he[n]+he[a]]};(function(t){const n=we;t.mul=function(s,o){const e=new Uint8Array(s.length+o.length-1);for(let i=0;i<s.length;i++)for(let r=0;r<o.length;r++)e[i+r]^=n.mul(s[i],o[r]);return e},t.mod=function(s,o){let e=new Uint8Array(s);for(;e.length-o.length>=0;){const i=e[0];for(let l=0;l<o.length;l++)e[l]^=n.mul(o[l],i);let r=0;for(;r<e.length&&e[r]===0;)r++;e=e.slice(r)}return e},t.generateECPolynomial=function(s){let o=new Uint8Array([1]);for(let e=0;e<s;e++)o=t.mul(o,new Uint8Array([1,n.exp(e)]));return o}})(Ze);const We=Ze;function De(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}De.prototype.initialize=function(n){this.degree=n,this.genPoly=We.generateECPolynomial(this.degree)};De.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const s=We.mod(a,this.genPoly),o=this.degree-s.length;if(o>0){const e=new Uint8Array(this.degree);return e.set(s,o),e}return s};var Xt=De,et={},K={},Ue={};Ue.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40};var V={};const tt="[0-9]+",Zt="[A-Z $%*+\\-./:]+";let ne="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ne=ne.replace(/u/g,"\\u");const Wt="(?:(?![A-Z0-9 $%*+\\-./:]|"+ne+`)(?:.|[\r
]))+`;V.KANJI=new RegExp(ne,"g");V.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");V.BYTE=new RegExp(Wt,"g");V.NUMERIC=new RegExp(tt,"g");V.ALPHANUMERIC=new RegExp(Zt,"g");const en=new RegExp("^"+ne+"$"),tn=new RegExp("^"+tt+"$"),nn=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");V.testKanji=function(n){return en.test(n)};V.testNumeric=function(n){return tn.test(n)};V.testAlphanumeric=function(n){return nn.test(n)};(function(t){const n=Ue,a=V;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,i){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?e.ccBits[0]:i<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits};function s(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(e,i){if(t.isValid(e))return e;try{return s(e)}catch{return i}}})(K);(function(t){const n=O,a=be,s=ve,o=K,e=Ue,i=7973,r=n.getBCHDigit(i);function l(g,h,b){for(let d=1;d<=40;d++)if(h<=t.getCapacity(d,b,g))return d}function f(g,h){return o.getCharCountIndicator(g,h)+4}function c(g,h){let b=0;return g.forEach(function(d){const u=f(d.mode,h);b+=u+d.getBitsLength()}),b}function w(g,h){for(let b=1;b<=40;b++)if(c(g,b)<=t.getCapacity(b,h,o.MIXED))return b}t.from=function(h,b){return e.isValid(h)?parseInt(h,10):b},t.getCapacity=function(h,b,d){if(!e.isValid(h))throw new Error("Invalid QR Code version");typeof d>"u"&&(d=o.BYTE);const u=n.getSymbolTotalCodewords(h),y=a.getTotalCodewordsCount(h,b),x=(u-y)*8;if(d===o.MIXED)return x;const C=x-f(d,h);switch(d){case o.NUMERIC:return Math.floor(C/10*3);case o.ALPHANUMERIC:return Math.floor(C/11*2);case o.KANJI:return Math.floor(C/13);case o.BYTE:default:return Math.floor(C/8)}},t.getBestVersionForData=function(h,b){let d;const u=s.from(b,s.M);if(Array.isArray(h)){if(h.length>1)return w(h,u);if(h.length===0)return 1;d=h[0]}else d=h;return l(d.mode,d.getLength(),u)},t.getEncodedBits=function(h){if(!e.isValid(h)||h<7)throw new Error("Invalid QR Code version");let b=h<<12;for(;n.getBCHDigit(b)-r>=0;)b^=i<<n.getBCHDigit(b)-r;return h<<12|b}})(et);var nt={};const Ae=O,ot=1335,on=21522,je=Ae.getBCHDigit(ot);nt.getEncodedBits=function(n,a){const s=n.bit<<3|a;let o=s<<10;for(;Ae.getBCHDigit(o)-je>=0;)o^=ot<<Ae.getBCHDigit(o)-je;return(s<<10|o)^on};var rt={};const rn=K;function Y(t){this.mode=rn.NUMERIC,this.data=t.toString()}Y.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Y.prototype.getLength=function(){return this.data.length};Y.prototype.getBitsLength=function(){return Y.getBitsLength(this.data.length)};Y.prototype.write=function(n){let a,s,o;for(a=0;a+3<=this.data.length;a+=3)s=this.data.substr(a,3),o=parseInt(s,10),n.put(o,10);const e=this.data.length-a;e>0&&(s=this.data.substr(a),o=parseInt(s,10),n.put(o,e*3+1))};var sn=Y;const an=K,Ee=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Q(t){this.mode=an.ALPHANUMERIC,this.data=t}Q.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};Q.prototype.getLength=function(){return this.data.length};Q.prototype.getBitsLength=function(){return Q.getBitsLength(this.data.length)};Q.prototype.write=function(n){let a;for(a=0;a+2<=this.data.length;a+=2){let s=Ee.indexOf(this.data[a])*45;s+=Ee.indexOf(this.data[a+1]),n.put(s,11)}this.data.length%2&&n.put(Ee.indexOf(this.data[a]),6)};var ln=Q;const un=K;function G(t){this.mode=un.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}G.getBitsLength=function(n){return n*8};G.prototype.getLength=function(){return this.data.length};G.prototype.getBitsLength=function(){return G.getBitsLength(this.data.length)};G.prototype.write=function(t){for(let n=0,a=this.data.length;n<a;n++)t.put(this.data[n],8)};var cn=G;const dn=K,fn=O;function X(t){this.mode=dn.KANJI,this.data=t}X.getBitsLength=function(n){return n*13};X.prototype.getLength=function(){return this.data.length};X.prototype.getBitsLength=function(){return X.getBitsLength(this.data.length)};X.prototype.write=function(t){let n;for(n=0;n<this.data.length;n++){let a=fn.toSJIS(this.data[n]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),t.put(a,13)}};var hn=X,st={exports:{}};(function(t){var n={single_source_shortest_paths:function(a,s,o){var e={},i={};i[s]=0;var r=n.PriorityQueue.make();r.push(s,0);for(var l,f,c,w,g,h,b,d,u;!r.empty();){l=r.pop(),f=l.value,w=l.cost,g=a[f]||{};for(c in g)g.hasOwnProperty(c)&&(h=g[c],b=w+h,d=i[c],u=typeof i[c]>"u",(u||d>b)&&(i[c]=b,r.push(c,b),e[c]=f))}if(typeof o<"u"&&typeof i[o]>"u"){var y=["Could not find a path from ",s," to ",o,"."].join("");throw new Error(y)}return e},extract_shortest_path_from_predecessor_list:function(a,s){for(var o=[],e=s;e;)o.push(e),a[e],e=a[e];return o.reverse(),o},find_path:function(a,s,o){var e=n.single_source_shortest_paths(a,s,o);return n.extract_shortest_path_from_predecessor_list(e,o)},PriorityQueue:{make:function(a){var s=n.PriorityQueue,o={},e;a=a||{};for(e in s)s.hasOwnProperty(e)&&(o[e]=s[e]);return o.queue=[],o.sorter=a.sorter||s.default_sorter,o},default_sorter:function(a,s){return a.cost-s.cost},push:function(a,s){var o={value:a,cost:s};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=n})(st);var gn=st.exports;(function(t){const n=K,a=sn,s=ln,o=cn,e=hn,i=V,r=O,l=gn;function f(y){return unescape(encodeURIComponent(y)).length}function c(y,x,C){const _=[];let T;for(;(T=y.exec(C))!==null;)_.push({data:T[0],index:T.index,mode:x,length:T[0].length});return _}function w(y){const x=c(i.NUMERIC,n.NUMERIC,y),C=c(i.ALPHANUMERIC,n.ALPHANUMERIC,y);let _,T;return r.isKanjiModeEnabled()?(_=c(i.BYTE,n.BYTE,y),T=c(i.KANJI,n.KANJI,y)):(_=c(i.BYTE_KANJI,n.BYTE,y),T=[]),x.concat(C,_,T).sort(function(I,m){return I.index-m.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function g(y,x){switch(x){case n.NUMERIC:return a.getBitsLength(y);case n.ALPHANUMERIC:return s.getBitsLength(y);case n.KANJI:return e.getBitsLength(y);case n.BYTE:return o.getBitsLength(y)}}function h(y){return y.reduce(function(x,C){const _=x.length-1>=0?x[x.length-1]:null;return _&&_.mode===C.mode?(x[x.length-1].data+=C.data,x):(x.push(C),x)},[])}function b(y){const x=[];for(let C=0;C<y.length;C++){const _=y[C];switch(_.mode){case n.NUMERIC:x.push([_,{data:_.data,mode:n.ALPHANUMERIC,length:_.length},{data:_.data,mode:n.BYTE,length:_.length}]);break;case n.ALPHANUMERIC:x.push([_,{data:_.data,mode:n.BYTE,length:_.length}]);break;case n.KANJI:x.push([_,{data:_.data,mode:n.BYTE,length:f(_.data)}]);break;case n.BYTE:x.push([{data:_.data,mode:n.BYTE,length:f(_.data)}])}}return x}function d(y,x){const C={},_={start:{}};let T=["start"];for(let S=0;S<y.length;S++){const I=y[S],m=[];for(let v=0;v<I.length;v++){const B=I[v],P=""+S+v;m.push(P),C[P]={node:B,lastCount:0},_[P]={};for(let z=0;z<T.length;z++){const q=T[z];C[q]&&C[q].node.mode===B.mode?(_[q][P]=g(C[q].lastCount+B.length,B.mode)-g(C[q].lastCount,B.mode),C[q].lastCount+=B.length):(C[q]&&(C[q].lastCount=B.length),_[q][P]=g(B.length,B.mode)+4+n.getCharCountIndicator(B.mode,x))}}T=m}for(let S=0;S<T.length;S++)_[T[S]].end=0;return{map:_,table:C}}function u(y,x){let C;const _=n.getBestModeForData(y);if(C=n.from(x,_),C!==n.BYTE&&C.bit<_.bit)throw new Error('"'+y+'" cannot be encoded with mode '+n.toString(C)+`.
 Suggested mode is: `+n.toString(_));switch(C===n.KANJI&&!r.isKanjiModeEnabled()&&(C=n.BYTE),C){case n.NUMERIC:return new a(y);case n.ALPHANUMERIC:return new s(y);case n.KANJI:return new e(y);case n.BYTE:return new o(y)}}t.fromArray=function(x){return x.reduce(function(C,_){return typeof _=="string"?C.push(u(_,null)):_.data&&C.push(u(_.data,_.mode)),C},[])},t.fromString=function(x,C){const _=w(x,r.isKanjiModeEnabled()),T=b(_),S=d(T,C),I=l.find_path(S.map,"start","end"),m=[];for(let v=1;v<I.length-1;v++)m.push(S.table[I[v]].node);return t.fromArray(h(m))},t.rawSplit=function(x){return t.fromArray(w(x,r.isKanjiModeEnabled()))}})(rt);const _e=O,xe=ve,mn=Yt,pn=Qt,yn=Qe,vn=Ge,Ne=Xe,Me=be,bn=Xt,ge=et,wn=nt,_n=K,ke=rt;function Cn(t,n){const a=t.size,s=vn.getPositions(n);for(let o=0;o<s.length;o++){const e=s[o][0],i=s[o][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||a<=e+r))for(let l=-1;l<=7;l++)i+l<=-1||a<=i+l||(r>=0&&r<=6&&(l===0||l===6)||l>=0&&l<=6&&(r===0||r===6)||r>=2&&r<=4&&l>=2&&l<=4?t.set(e+r,i+l,!0,!0):t.set(e+r,i+l,!1,!0))}}function En(t){const n=t.size;for(let a=8;a<n-8;a++){const s=a%2===0;t.set(a,6,s,!0),t.set(6,a,s,!0)}}function xn(t,n){const a=yn.getPositions(n);for(let s=0;s<a.length;s++){const o=a[s][0],e=a[s][1];for(let i=-2;i<=2;i++)for(let r=-2;r<=2;r++)i===-2||i===2||r===-2||r===2||i===0&&r===0?t.set(o+i,e+r,!0,!0):t.set(o+i,e+r,!1,!0)}}function kn(t,n){const a=t.size,s=ge.getEncodedBits(n);let o,e,i;for(let r=0;r<18;r++)o=Math.floor(r/3),e=r%3+a-8-3,i=(s>>r&1)===1,t.set(o,e,i,!0),t.set(e,o,i,!0)}function Se(t,n,a){const s=t.size,o=wn.getEncodedBits(n,a);let e,i;for(e=0;e<15;e++)i=(o>>e&1)===1,e<6?t.set(e,8,i,!0):e<8?t.set(e+1,8,i,!0):t.set(s-15+e,8,i,!0),e<8?t.set(8,s-e-1,i,!0):e<9?t.set(8,15-e-1+1,i,!0):t.set(8,15-e-1,i,!0);t.set(s-8,8,1,!0)}function Sn(t,n){const a=t.size;let s=-1,o=a-1,e=7,i=0;for(let r=a-1;r>0;r-=2)for(r===6&&r--;;){for(let l=0;l<2;l++)if(!t.isReserved(o,r-l)){let f=!1;i<n.length&&(f=(n[i]>>>e&1)===1),t.set(o,r-l,f),e--,e===-1&&(i++,e=7)}if(o+=s,o<0||a<=o){o-=s,s=-s;break}}}function Tn(t,n,a){const s=new mn;a.forEach(function(l){s.put(l.mode.bit,4),s.put(l.getLength(),_n.getCharCountIndicator(l.mode,t)),l.write(s)});const o=_e.getSymbolTotalCodewords(t),e=Me.getTotalCodewordsCount(t,n),i=(o-e)*8;for(s.getLengthInBits()+4<=i&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const r=(i-s.getLengthInBits())/8;for(let l=0;l<r;l++)s.put(l%2?17:236,8);return Bn(s,t,n)}function Bn(t,n,a){const s=_e.getSymbolTotalCodewords(n),o=Me.getTotalCodewordsCount(n,a),e=s-o,i=Me.getBlocksCount(n,a),r=s%i,l=i-r,f=Math.floor(s/i),c=Math.floor(e/i),w=c+1,g=f-c,h=new bn(g);let b=0;const d=new Array(i),u=new Array(i);let y=0;const x=new Uint8Array(t.buffer);for(let I=0;I<i;I++){const m=I<l?c:w;d[I]=x.slice(b,b+m),u[I]=h.encode(d[I]),b+=m,y=Math.max(y,m)}const C=new Uint8Array(s);let _=0,T,S;for(T=0;T<y;T++)for(S=0;S<i;S++)T<d[S].length&&(C[_++]=d[S][T]);for(T=0;T<g;T++)for(S=0;S<i;S++)C[_++]=u[S][T];return C}function An(t,n,a,s){let o;if(Array.isArray(t))o=ke.fromArray(t);else if(typeof t=="string"){let f=n;if(!f){const c=ke.rawSplit(t);f=ge.getBestVersionForData(c,a)}o=ke.fromString(t,f||40)}else throw new Error("Invalid data");const e=ge.getBestVersionForData(o,a);if(!e)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=e;else if(n<e)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+e+`.
`);const i=Tn(n,a,o),r=_e.getSymbolSize(n),l=new pn(r);return Cn(l,n),En(l),xn(l,n),Se(l,a,0),n>=7&&kn(l,n),Sn(l,i),isNaN(s)&&(s=Ne.getBestMask(l,Se.bind(null,l,a))),Ne.applyMask(s,l),Se(l,a,s),{modules:l,version:n,errorCorrectionLevel:a,maskPattern:s,segments:o}}Ke.create=function(n,a){if(typeof n>"u"||n==="")throw new Error("No input text");let s=xe.M,o,e;return typeof a<"u"&&(s=xe.from(a.errorCorrectionLevel,xe.M),o=ge.from(a.version),e=Ne.from(a.maskPattern),a.toSJISFunc&&_e.setToSJISFunction(a.toSJISFunc)),An(n,o,s,e)};var at={},Fe={};(function(t){function n(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let s=a.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+a);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(e){return[e,e]}))),s.length===6&&s.push("F","F");const o=parseInt(s.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+s.slice(0,6).join("")}}t.getOptions=function(s){s||(s={}),s.color||(s.color={});const o=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,e=s.width&&s.width>=21?s.width:void 0,i=s.scale||4;return{width:e,scale:e?4:i,margin:o,color:{dark:n(s.color.dark||"#000000ff"),light:n(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},t.getScale=function(s,o){return o.width&&o.width>=s+o.margin*2?o.width/(s+o.margin*2):o.scale},t.getImageWidth=function(s,o){const e=t.getScale(s,o);return Math.floor((s+o.margin*2)*e)},t.qrToImageData=function(s,o,e){const i=o.modules.size,r=o.modules.data,l=t.getScale(i,e),f=Math.floor((i+e.margin*2)*l),c=e.margin*l,w=[e.color.light,e.color.dark];for(let g=0;g<f;g++)for(let h=0;h<f;h++){let b=(g*f+h)*4,d=e.color.light;if(g>=c&&h>=c&&g<f-c&&h<f-c){const u=Math.floor((g-c)/l),y=Math.floor((h-c)/l);d=w[r[u*i+y]?1:0]}s[b++]=d.r,s[b++]=d.g,s[b++]=d.b,s[b]=d.a}}})(Fe);(function(t){const n=Fe;function a(o,e,i){o.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=i,e.width=i,e.style.height=i+"px",e.style.width=i+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(e,i,r){let l=r,f=i;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),i||(f=s()),l=n.getOptions(l);const c=n.getImageWidth(e.modules.size,l),w=f.getContext("2d"),g=w.createImageData(c,c);return n.qrToImageData(g.data,e,l),a(w,f,c),w.putImageData(g,0,0),f},t.renderToDataURL=function(e,i,r){let l=r;typeof l>"u"&&(!i||!i.getContext)&&(l=i,i=void 0),l||(l={});const f=t.render(e,i,l),c=l.type||"image/png",w=l.rendererOpts||{};return f.toDataURL(c,w.quality)}})(at);var it={};const Nn=Fe;function Ve(t,n){const a=t.a/255,s=n+'="'+t.hex+'"';return a<1?s+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function Te(t,n,a){let s=t+n;return typeof a<"u"&&(s+=" "+a),s}function Mn(t,n,a){let s="",o=0,e=!1,i=0;for(let r=0;r<t.length;r++){const l=Math.floor(r%n),f=Math.floor(r/n);!l&&!e&&(e=!0),t[r]?(i++,r>0&&l>0&&t[r-1]||(s+=e?Te("M",l+a,.5+f+a):Te("m",o,0),o=0,e=!1),l+1<n&&t[r+1]||(s+=Te("h",i),i=0)):o++}return s}it.render=function(n,a,s){const o=Nn.getOptions(a),e=n.modules.size,i=n.modules.data,r=e+o.margin*2,l=o.color.light.a?"<path "+Ve(o.color.light,"fill")+' d="M0 0h'+r+"v"+r+'H0z"/>':"",f="<path "+Ve(o.color.dark,"stroke")+' d="'+Mn(i,e,o.margin)+'"/>',c='viewBox="0 0 '+r+" "+r+'"',g='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+c+' shape-rendering="crispEdges">'+l+f+`</svg>
`;return typeof s=="function"&&s(null,g),g};const Pn=Jt,Pe=Ke,lt=at,In=it;function Oe(t,n,a,s,o){const e=[].slice.call(arguments,1),i=e.length,r=typeof e[i-1]=="function";if(!r&&!Pn())throw new Error("Callback required as last argument");if(r){if(i<2)throw new Error("Too few arguments provided");i===2?(o=a,a=n,n=s=void 0):i===3&&(n.getContext&&typeof o>"u"?(o=s,s=void 0):(o=s,s=a,a=n,n=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(a=n,n=s=void 0):i===2&&!n.getContext&&(s=a,a=n,n=void 0),new Promise(function(l,f){try{const c=Pe.create(a,s);l(t(c,n,s))}catch(c){f(c)}})}try{const l=Pe.create(a,s);o(null,t(l,n,s))}catch(l){o(l)}}re.create=Pe.create;re.toCanvas=Oe.bind(null,lt.render);re.toDataURL=Oe.bind(null,lt.renderToDataURL);re.toString=Oe.bind(null,function(t,n,a){return In.render(t,a)});const ut={__name:"Dialog",setup(t){return(n,a)=>(k(),F(E(vt),null,{default:M(()=>[Z(n.$slots,"default")]),_:3}))}},ct={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss","openAutoFocus","closeAutoFocus"],setup(t,{emit:n}){const a=t,o=bt(n);return(e,i)=>(k(),F(E(xt),null,{default:M(()=>[N(E(wt),{class:"fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),N(E(_t),oe({class:E(me)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",a.class)},{...a,...E(o)}),{default:M(()=>[Z(e.$slots,"default"),N(E(Ct),{class:"absolute top-4 right-4 p-0.5 transition-colors rounded-md hover:bg-secondary"},{default:M(()=>[N(E(Et),{class:"w-4 h-4"}),i[0]||(i[0]=p("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}},Ln={class:"space-y-6 py-4"},Rn={class:"flex flex-col items-center space-y-4"},$n=["src","alt"],Dn={class:"flex flex-col gap-2"},Un={class:"flex-1 bg-gray-100 p-2 px-3 rounded-full text-sm max-w-80 overflow-auto"},Fn={class:"flex items-center justify-center gap-2"},On={__name:"QRCodeDialog",props:{visible:{type:Boolean,default:!1},shortUrl:{type:String,default:""}},emits:["update:visible"],setup(t,{emit:n}){const a=t,s=n,{toast:o}=kt(),e=L(""),i=L(256),r=L(!1),l=async()=>{if(a.shortUrl){r.value=!0;try{const g={width:i.value,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"};e.value=await re.toDataURL(a.shortUrl,g)}catch(g){console.error("生成QR码失败:",g),o({title:"Generation failed",description:"QR code generation failed, please try again.",variant:"destructive",class:"rounded-2xl"})}finally{r.value=!1}}};de(()=>a.shortUrl,l,{immediate:!0}),de(()=>i.value,l);const f=()=>{if(!e.value)return;const g=document.createElement("a");g.download=`qrcode-${a.shortUrl.replace(/[^a-zA-Z0-9]/g,"_")}.png`,g.href=e.value,document.body.appendChild(g),g.click(),document.body.removeChild(g)},c=async()=>{try{await navigator.clipboard.writeText(a.shortUrl),o({title:"Copy successful.",description:"Short link copied to clipboard.",class:"rounded-2xl"})}catch(g){console.error("复制链接失败:",g),o({title:"Copy failed",description:"Link copy failed, please copy manually.",variant:"destructive",class:"rounded-2xl"})}},w=()=>{s("update:visible",!1)};return(g,h)=>(k(),F(E(ut),{open:t.visible,"onUpdate:open":w},{default:M(()=>[N(E(ct),{class:"max-w-xl shadow-none border-0 bg-transparent"},{default:M(()=>[p("div",Ln,[p("div",Rn,[r.value?(k(),A("div",{key:0,class:"flex items-center justify-center",style:le({width:i.value+"px",height:i.value+"px"})},[...h[0]||(h[0]=[p("div",{class:"flex flex-col items-center gap-2"},[p("i",{class:"icon-[material-symbols--progress-activity] animate-spin text-2xl"}),p("span",{class:"text-sm text-gray-500"},"Generating...")],-1)])],4)):e.value?(k(),A("img",{key:1,src:e.value,alt:t.shortUrl,class:"block mx-auto transition-all",style:le({width:i.value+"px",height:i.value+"px"})},null,12,$n)):(k(),A("div",{key:2,class:"flex items-center justify-center bg-gray-100 rounded",style:le({width:i.value+"px",height:i.value+"px"})},[...h[1]||(h[1]=[p("span",{class:"text-gray-500"},"No QR code available.",-1)])],4)),p("div",Dn,[p("code",Un,R(t.shortUrl),1),p("div",Fn,[N(E(U),{variant:"outline",onClick:c,size:"sm",class:"rounded-full"},{default:M(()=>[...h[2]||(h[2]=[p("i",{class:"icon-[material-symbols--content-copy] mr-1"},null,-1),$(" 复制 ",-1)])]),_:1}),N(E(U),{variant:"outline",onClick:f,size:"sm",class:"rounded-full"},{default:M(()=>[...h[3]||(h[3]=[p("i",{class:"icon-[material-symbols--download] mr-1 text-lg"},null,-1),$(" 下载 ",-1)])]),_:1})])])])])]),_:1})]),_:1},8,["open"]))}},zn={class:"p-5"},jn={class:"flex flex-col space-y-2"},Vn={class:"flex flex-col space-y-1 min-w-0 flex-1"},qn={class:"flex items-center justify-between"},Hn={class:"font-semibold truncate text-blue-500 hover:underline"},Jn={class:"flex items-center space-x-1 ml-3"},Kn={key:0,class:"icon-[material-symbols--content-copy-outline-rounded] h-4 w-4"},Yn={key:1,class:"icon-[material-symbols--check] h-4 w-4"},Qn={key:2,class:"icon-[material-symbols--close] h-4 w-4"},Gn={class:"flex items-center text-xs text-muted-foreground space-x-1"},Xn={class:"capitalize bg-secondary px-2 h-5 rounded-sm text-xs font-medium flex items-center"},Zn={key:0,class:"capitalize bg-secondary px-2 h-5 rounded-sm text-xs font-medium flex items-center"},Wn={__name:"SlugCard",props:{item:{type:Object,required:!0}},emits:["refresh"],setup(t,{emit:n}){const a=n,o=L(t.item),e=`${location.protocol}//${location.host}/${o.value.slug}`,i=L(null),r=async()=>{zt(e,void 0,(g,h)=>{i.value=!g}),setTimeout(()=>{i.value=null},1e3)},l=L(!1),f=[{name:"Edit",icon:"icon-[material-symbols--edit-document-outline]",operate:"edit"},{name:"QR Code",icon:"icon-[material-symbols--qr-code]",operate:"qr-code"},{name:"Duplicate",icon:"icon-[material-symbols--file-copy-outline]",operate:"duplicate"},{name:"Delete",icon:"icon-[material-symbols--delete-outline]",operate:"delete",class:"!text-destructive hover:!bg-destructive hover:!text-destructive-foreground"}],c=()=>{a("refresh"),j({title:"操作成功",description:`短链接 ${o.value.slug} 已更新`,class:"rounded-2xl"})},w=async g=>{switch(g){case"edit":fe({...o.value,value:void 0,key:void 0}).then(c).catch(()=>{});break;case"duplicate":fe({...o.value,value:void 0,key:void 0,creation:void 0,slug:`${o.value.slug}-copy`}).then(c).catch(()=>{});break;case"qr-code":l.value=!0;break;case"delete":fetch("/api/?action=delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:o.value.slug})}).then(h=>h.json()).then(h=>{console.log(h),h.code===0?(j({title:"删除成功",description:`短链接 ${o.value.slug} 已删除`,class:"rounded-2xl"}),a("refresh")):j({title:"删除失败",description:h.msg||"删除操作失败，请重试",variant:"destructive",class:"rounded-2xl"})}).catch(()=>{j({title:"删除失败",description:"网络错误，请重试",variant:"destructive",class:"rounded-2xl"})});break;default:St({title:"Error",description:"Unknown operate"});break}};return(g,h)=>(k(),F(E(Rt),{class:"transition-all duration-200 rounded-xl shadow-sm hover:shadow-md border-border"},{default:M(()=>[p("div",zn,[p("div",jn,[p("div",Vn,[p("div",qn,[p("h3",Hn,[p("a",{href:e,target:"_blank"},R(o.value.displayName||o.value.slug),1)]),p("div",Jn,[N(E(U),{variant:"ghost",size:"icon",onClick:r,class:H(["h-6 w-6 shrink-0 text-muted-foreground",i.value&&"!text-green-600 !bg-green-50"])},{default:M(()=>[i.value==null?(k(),A("i",Kn)):i.value?(k(),A("i",Yn)):(k(),A("i",Qn))]),_:1},8,["class"]),N(E(jt),null,{default:M(()=>[N(E(Vt),{"as-child":""},{default:M(()=>[N(E(U),{variant:"ghost",size:"icon",class:"h-6 w-6 shrink-0 text-muted-foreground hover:text-foreground"},{default:M(()=>[...h[2]||(h[2]=[p("i",{class:"icon-[material-symbols--more-vert] h-4 w-4"},null,-1)])]),_:1})]),_:1}),N(E(qt),{align:"end",class:"shadow-sm"},{default:M(()=>[(k(),A(pe,null,ye(f,b=>N(E(Ht),{key:b.operate,class:H(["flex items-center gap-2 cursor-pointer text-muted-foreground",b.class]),onClick:d=>w(b.operate)},{default:M(()=>[p("i",{class:H(b.icon+" h-4 w-4")},null,2),p("span",null,R(b.name),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1})])]),p("p",{class:"text-xs text-muted-foreground truncate",onClick:h[0]||(h[0]=b=>w("edit"))},R(o.value.url),1)]),p("div",Gn,[p("span",Xn,R(o.value.mode),1),o.value.displayName?(k(),A("span",Zn,R(o.value.slug),1)):W("",!0)])])]),N(On,{visible:l.value,"onUpdate:visible":h[1]||(h[1]=b=>l.value=b),"short-url":e},null,8,["visible"])]),_:1}))}},qe={__name:"Textarea",props:{defaultValue:{type:[String,Number],required:!1},modelValue:{type:[String,Number],required:!1}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,o=$t(a,"modelValue",n,{passive:!0,defaultValue:a.defaultValue});return(e,i)=>Tt((k(),A("textarea",{"onUpdate:modelValue":i[0]||(i[0]=r=>At(o)?o.value=r:null),class:H(E(me)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e.$attrs.class??""))},null,2)),[[Bt,E(o)]])}},eo={class:"space-y-6"},to={class:"relative"},no={class:"absolute bottom-2 left-2 right-2 flex"},oo={class:"flex gap-1 bg-white/60 backdrop-blur rounded-full overflow-auto"},ro={key:0,class:"icon-[material-symbols--refresh] animate-spin"},so={key:1,class:"icon-[material-symbols--flash-on] text-sm"},ao={class:"flex"},io={class:"flex w-full max-w-80 relative rounded-full border border-input shadow-sm bg-slate-100"},lo={key:0,class:"icon-[material-symbols--autorenew-outline-rounded] text-base"},uo={key:1,class:"icon-[material-symbols--progress-activity] animate-spin text-base"},co={class:"grid gap-4 grid-cols-1 sm:grid-cols-2"},fo={class:"space-y-2"},ho={class:"space-y-2"},go={class:"space-y-2"},mo={__name:"LinkForm",props:{modelValue:{type:Object,default:()=>Ie(Le)},isDialog:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},autoSlug:{type:Boolean,default:!0}},emits:["update:modelValue","submit","cancel"],setup(t,{emit:n}){const a=t,s=n,o=location.host,e=L({randomize:!1,create:!1}),i=L(!1),r=Be({get:()=>a.modelValue,set:d=>s("update:modelValue",d)}),l=Be(()=>r.value.url&&r.value.url.trim()),f=async()=>{e.value.randomize=!0;try{const d=await fetch("/api/?action=randomize",{method:"POST",headers:{"Content-Type":"application/json"}}),{data:u}=await d.json();setTimeout(()=>{const y={...r.value,slug:u};s("update:modelValue",y)},500)}catch(d){console.error("Failed to generate slug:",d),j({title:"生成失败",description:"无法生成短链接标识符，请手动输入",variant:"destructive",class:"rounded-2xl"})}finally{setTimeout(()=>{e.value.randomize=!1},500)}},c=d=>{const u={...r.value,mode:d};s("update:modelValue",u)},w=async()=>{if(l.value){e.value.create=!0;try{const u=await(await fetch("/api/?action=save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r.value)})).json();u.code===0?(j({title:r.value.creation?"更新成功":"创建成功",description:`短链接 ${r.value.slug} ${r.value.creation?"已更新":"已创建"}`,class:"rounded-2xl"}),s("submit",u)):j({title:r.value.creation?"更新失败":"创建失败",description:u.msg||"操作失败，请重试",variant:"destructive",class:"rounded-2xl"})}catch(d){j({title:"操作失败",description:"网络错误，请检查连接后重试",variant:"destructive",class:"rounded-2xl"}),console.error("Network error:",d)}finally{e.value.create=!1}}};let g=L(""),h=L(null);const b=()=>{if(!h.value)return;const d=h.value.scrollHeight;g.value=d+10,i.value=!i.value};return de(()=>a.modelValue,d=>{a.autoSlug&&!d.creation&&!d.slug&&Nt(()=>{f()})},{immediate:!0}),(d,u)=>(k(),A("form",{onSubmit:ee(w,["prevent"]),class:"space-y-6"},[p("div",eo,[p("div",to,[N(E(qe),{id:"url","model-value":r.value.url,"onUpdate:modelValue":u[0]||(u[0]=y=>s("update:modelValue",{...r.value,url:y})),placeholder:"https://example.com",class:"resize-none rounded-2xl pb-10",rows:4,disabled:t.loading||e.value.create},null,8,["model-value","disabled"]),p("div",no,[p("div",oo,[(k(!0),A(pe,null,ye(E(Re),y=>(k(),F(E(U),{key:y.value,value:y.value,onClick:ee(x=>c(y.value),["prevent"]),variant:r.value.mode===y.value?"default":"outline",class:"rounded-full text-xs h-7 border-0 shadow-none shrink-0"},{default:M(()=>[$(R(y.label),1)]),_:2},1032,["value","onClick","variant"]))),128))]),u[5]||(u[5]=p("div",{class:"flex-1 mx-2"},null,-1)),N(E(U),{type:"submit",disabled:!l.value||t.loading||e.value.create,class:"rounded-full h-7 self-end gap-2 shrink-0"},{default:M(()=>[t.loading||e.value.create?(k(),A("i",ro)):(k(),A("i",so)),$(" "+R(r.value.creation?"更新":"创建"),1)]),_:1},8,["disabled"])])]),p("div",ao,[p("div",io,[p("div",{class:H(["flex items-center h-9 px-3 pr-2 text-sm",r.value.creation&&"text-slate-500"])},R(E(o)),3),N(E(ue),{type:"text",class:H(["rounded-full shadow-none border-0 !bg-white !pl-2 pr-10",r.value.creation&&"!opacity-100 text-slate-500"]),"model-value":r.value.slug,"onUpdate:modelValue":u[1]||(u[1]=y=>s("update:modelValue",{...r.value,slug:y})),placeholder:"短链接",disabled:r.value.creation,required:"",pattern:"[a-zA-Z0-9_\\-.]{1,24}"},null,8,["class","model-value","disabled"]),N(E(U),{type:"button",variant:"outline",size:"icon",class:"rounded-full absolute top-1/2 right-2 -translate-y-1/2 w-6 h-6 flex-shrink-0 active:scale-95",disabled:r.value.creation,onClick:ee(f,["prevent"])},{default:M(()=>[e.value.randomize?(k(),A("i",uo)):(k(),A("i",lo))]),_:1},8,["disabled"])]),u[7]||(u[7]=p("div",{class:"flex-1"},null,-1)),N(E(U),{variant:"text",type:"button",class:"shrink-0 self-end text-xs rounded-full",onClick:b},{default:M(()=>[u[6]||(u[6]=$(" 高级设置 ",-1)),p("i",{class:H(["icon-[material-symbols--expand-more] transition-transform text-lg -mr-1",i.value&&"rotate-180"])},null,2)]),_:1})]),p("div",{ref_key:"advancedArea",ref:h,class:H(["space-y-4 overflow-hidden transition-all px-2 -mx-2",i.value&&"py-1"]),style:le({height:i.value?E(g)+"px":"0"})},[p("div",co,[p("div",fo,[N(E(ue),{id:"displayName",class:"rounded-full","model-value":r.value.displayName,"onUpdate:modelValue":u[2]||(u[2]=y=>s("update:modelValue",{...r.value,displayName:y})),placeholder:"显示名称",disabled:t.loading||e.value.create},null,8,["model-value","disabled"])]),p("div",ho,[N(E(ue),{id:"displayName",class:"rounded-full","model-value":r.value.passcode,"onUpdate:modelValue":u[3]||(u[3]=y=>s("update:modelValue",{...r.value,passcode:y})),placeholder:"访问密码",type:"password",disabled:t.loading||e.value.create},null,8,["model-value","disabled"])])]),p("div",go,[N(E(qe),{id:"notes","model-value":r.value.notes,"onUpdate:modelValue":u[4]||(u[4]=y=>s("update:modelValue",{...r.value,notes:y})),placeholder:"为这个短链接添加一些备注信息...",class:"rounded-2xl resize-none",rows:"4",disabled:t.loading||e.value.create},null,8,["model-value","disabled"])])],6)])],32))}},po={__name:"CreateLinkDialog",setup(t){const n=o=>{o.code===0?(j({title:D.value.formData.creation?"更新成功":"创建成功",description:`短链接 ${D.value.formData.slug} ${D.value.formData.creation?"已更新":"已创建"}`,class:"rounded-2xl"}),Ce(!0)):j({title:D.value.formData.creation?"更新失败":"创建失败",description:o.msg||"操作失败，请重试",variant:"destructive",class:"rounded-2xl"})},a=()=>{Ce(!1)},s=Be({get:()=>D.value.formData,set:o=>{D.value.formData=o}});return(o,e)=>(k(),F(E(ut),{open:E(D).visible,"onUpdate:open":e[1]||(e[1]=i=>!i&&E(Ce)(!1))},{default:M(()=>[N(E(ct),{class:"max-w-2xl max-h-[90vh] overflow-y-auto shadow-none p-2 border-0 bg-transparent"},{default:M(()=>[N(E(mo),{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value=i),"is-dialog":!0,"auto-slug":E(D).isCreate,onSubmit:n,onCancel:a},null,8,["modelValue","auto-slug"])]),_:1})]),_:1},8,["open"]))}},yo={class:"w-full"},vo={key:0,class:"mb-6 p-4 bg-muted/50 rounded-lg"},bo={class:"flex items-center justify-between"},wo={class:"text-sm text-muted-foreground"},_o={key:0},Co={class:"font-medium text-foreground"},Eo={class:"font-medium text-foreground"},xo={class:"font-medium text-foreground"},ko={key:1},So={class:"font-medium text-foreground"},To={class:"font-medium text-foreground"},Bo={key:2},Ao={class:"font-medium text-foreground"},No={class:"font-medium text-foreground"},Mo={key:1,class:"mb-6 text-center text-muted-foreground"},Po={key:2,class:"text-center py-24"},Io={class:"max-w-md mx-auto space-y-6"},Lo={class:"space-y-2"},Ro={class:"text-xl font-semibold tracking-tight"},$o={class:"text-muted-foreground"},Do={key:0},Uo={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Fo={key:4,class:"mt-8 text-center"},Oo={key:0,class:"flex items-center justify-center gap-2 py-4 text-muted-foreground"},zo={key:1,class:"py-4 text-muted-foreground text-sm flex items-center justify-center"},jo={key:2,class:"py-4 text-muted-foreground text-sm flex items-center justify-center"},Vo={__name:"SlugItems",setup(t,{expose:n}){const a=L(!1),s=L(!1),o=L([]),e=L({count:0,page:1,rows:10}),i=L(""),r=L("all"),l=L(!0),f=async(d="",u="all")=>{const y=Math.random().toString(36).substring(2);a.value=!0,e.value.page=1,o.value=[],l.value=!0;const x={rows:e.value.rows,page:e.value.page};d&&(x.search=d),u&&u!=="all"&&(x.mode=u),fetch("/api/?action=get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}).then(C=>C.json()).then(({data:C})=>{const{count:_,results:T}=C||{};e.value.count=_;const S=(T||[]).map(I=>{let m={};try{m=JSON.parse(I.value)}catch(v){console.log(v)}return{...I,...m,oid:y+I.key}});o.value=S,l.value=S.length===e.value.rows&&o.value.length<_}).finally(()=>{a.value=!1})},c=async()=>{if(s.value||!l.value)return;s.value=!0,e.value.page+=1;const d={rows:e.value.rows,page:e.value.page};i.value&&(d.search=i.value),r.value&&r.value!=="all"&&(d.mode=r.value),fetch("/api/?action=get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(u=>u.json()).then(({data:u})=>{const{results:y}=u||{},x=Math.random().toString(36).substring(2),C=(y||[]).map(_=>{let T={};try{T=JSON.parse(_.value)}catch(S){console.log(S)}return{..._,...T,oid:x+_.key}});C.length>0?(o.value.push(...C),l.value=C.length===e.value.rows&&o.value.length<e.value.count):l.value=!1}).finally(()=>{s.value=!1})},w=(d,u="all")=>{i.value=d,r.value=u,f(d,u)},g=(d,u)=>{i.value=d,r.value=u,f(d,u)},h=d=>{const u=Re.find(y=>y.value===d);return u?u.label:d},b=()=>{const{scrollTop:d,scrollHeight:u,clientHeight:y}=document.documentElement;d+y>=u-200&&l.value&&!s.value&&!a.value&&c()};return Mt(()=>{f(),window.addEventListener("scroll",b)}),Pt(()=>{window.removeEventListener("scroll",b)}),n({refresh:f,search:w,filter:g}),(d,u)=>(k(),A("div",yo,[i.value?(k(),A("div",vo,[p("div",bo,[p("div",wo,[i.value&&r.value!=="all"?(k(),A("span",_o,[u[1]||(u[1]=$(' 搜索 "',-1)),p("span",Co,R(i.value),1),u[2]||(u[2]=$('" 在 ',-1)),p("span",Eo,R(h(r.value)),1),u[3]||(u[3]=$(" 类型中， 找到 ",-1)),p("span",xo,R(e.value.count),1),u[4]||(u[4]=$(" 条结果 ",-1))])):i.value?(k(),A("span",ko,[u[5]||(u[5]=$(' 正在搜索 "',-1)),p("span",So,R(i.value),1),u[6]||(u[6]=$('"， 找到 ',-1)),p("span",To,R(e.value.count),1),u[7]||(u[7]=$(" 条结果 ",-1))])):r.value!=="all"?(k(),A("span",Bo,[u[8]||(u[8]=$(" 正在筛选 ",-1)),p("span",Ao,R(h(r.value)),1),u[9]||(u[9]=$(" 类型， 找到 ",-1)),p("span",No,R(e.value.count),1),u[10]||(u[10]=$(" 条结果 ",-1))])):W("",!0)])])])):W("",!0),a.value?(k(),A("div",Mo,[...u[11]||(u[11]=[p("div",{class:"flex items-center justify-center gap-2"},[p("i",{class:"icon-[material-symbols--progress-activity] animate-spin h-4 w-4"}),p("span",null,"搜索中...")],-1)])])):o.value.length===0?(k(),A("div",Po,[p("div",Io,[u[13]||(u[13]=p("div",{class:"w-20 h-20 mx-auto rounded-full bg-muted flex items-center justify-center"},[p("i",{class:"icon-[material-symbols--link] h-10 w-10 text-muted-foreground"})],-1)),p("div",Lo,[p("h3",Ro,R(i.value||r.value!=="all"?"没有找到匹配的结果":"还没有短链接"),1),p("p",$o,R(i.value||r.value!=="all"?"尝试调整搜索条件或筛选类型":"点击下方按钮创建你的第一个短链接"),1)]),i.value||r.value!=="all"?W("",!0):(k(),A("div",Do,[N(E(U),{onClick:E(fe),class:"gap-2"},{default:M(()=>[...u[12]||(u[12]=[p("i",{class:"icon-[material-symbols--add] h-4 w-4"},null,-1),$(" 创建短链接 ",-1)])]),_:1},8,["onClick"])]))])])):(k(),A("div",Uo,[(k(!0),A(pe,null,ye(o.value,y=>(k(),F(Wn,oe({key:y.oid},{ref_for:!0},{item:y},{onRefresh:u[0]||(u[0]=()=>f(i.value,r.value))}),null,16))),128))])),o.value.length>0?(k(),A("div",Fo,[s.value?(k(),A("div",Oo,[...u[14]||(u[14]=[p("i",{class:"icon-[material-symbols--progress-activity] animate-spin h-4 w-4"},null,-1),p("span",null,"正在加载更多...",-1)])])):l.value?(k(),A("div",jo,[...u[16]||(u[16]=[p("i",{class:"icon-[material-symbols--keyboard-arrow-down] h-4 w-4 mr-1"},null,-1),$(" 向下滚动加载更多 ",-1)])])):(k(),A("div",zo,[u[15]||(u[15]=p("i",{class:"icon-[material-symbols--check-circle] h-4 w-4 mr-1"},null,-1)),$(" 已显示全部 "+R(o.value.length)+" 条记录 ",1)]))])):W("",!0),N(po)]))}},qo={class:"min-h-screen bg-background"},Ho={class:"border-b border-border"},Jo={class:"container px-4 h-32 flex flex-col"},Ko={class:"flex h-16 items-center justify-between"},Yo={class:"text-xl font-semibold tracking-tight"},Qo={class:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1"},Go={class:"flex items-start gap-1"},Xo={class:"flex overflow-auto -ml-3"},Zo={class:"flex items-center gap-2"},Wo={class:"container p-4"},nr={__name:"Manage",setup(t){const n=Lt(),a=location.host,s=L(null),o=L(!1),e=L(""),i=L(""),r=L("all"),l=()=>{fe().then(()=>{s.value&&s.value.refresh(e.value.trim(),r.value)}).catch(()=>{})},f=()=>{n.push("/home")},c=()=>{s.value&&e.value.trim()!==i.value&&(i.value=e.value.trim(),s.value.search(i.value,r.value))},w=()=>{e.value="",i.value="",s.value&&s.value.search("",r.value)},g=b=>{r.value=b,s.value&&s.value.filter(e.value.trim(),b)};de(e,b=>{!b.trim()&&i.value&&w()});const h=[{value:"all",label:"全部"},...Re];return(b,d)=>(k(),A("div",qo,[p("div",Ho,[p("div",Jo,[p("div",Ko,[p("a",{href:"/home",onClick:ee(f,["prevent"]),class:"flex items-center gap-4"},[p("h1",Yo,R(E(a)),1)]),p("form",{class:"relative flex-1 ml-2 max-w-80",onSubmit:ee(c,["prevent"])},[N(E(ue),{id:"search",modelValue:e.value,"onUpdate:modelValue":d[0]||(d[0]=u=>e.value=u),onFocus:d[1]||(d[1]=u=>o.value=!0),onBlur:d[2]||(d[2]=u=>o.value=!1),onKeydown:It(c,["enter"]),placeholder:"搜索短链接...",autocomplete:"off",class:"rounded-full pr-10"},null,8,["modelValue"]),p("div",Qo,[e.value?(k(),F(E(U),{key:0,type:"button",variant:"ghost",size:"icon",class:"rounded-full h-6 w-6",onClick:w},{default:M(()=>[...d[3]||(d[3]=[p("i",{class:"icon-[material-symbols--close] h-4 w-4"},null,-1)])]),_:1})):(k(),F(E(U),{key:1,type:"button",variant:"ghost",size:"icon",class:"rounded-full h-6 w-6",onClick:c},{default:M(()=>[...d[4]||(d[4]=[p("i",{class:"icon-[material-symbols--search] h-5 w-5"},null,-1)])]),_:1}))])],32)]),d[7]||(d[7]=p("div",{class:"flex-1"},null,-1)),p("div",Go,[p("div",Xo,[(k(),A(pe,null,ye(h,u=>p("div",{key:u.value,class:"shrink-0"},[N(E(U),{variant:"text",size:"sm",class:"gap-2 h-7 rounded-full shrink-0",onClick:y=>g(u.value)},{default:M(()=>[p("div",Zo,[p("span",null,R(u.label),1)])]),_:2},1032,["onClick"]),p("div",{class:H(["mt-1 h-0.5 w-0 mx-auto rounded-lg transition-all",{"bg-black !w-6":r.value==u.value}])},null,2)])),64))]),d[6]||(d[6]=p("div",{class:"flex-1"},null,-1)),N(E(U),{onClick:l,size:"sm",class:"gap-1 h-7 rounded-full"},{default:M(()=>[...d[5]||(d[5]=[p("i",{class:"icon-[material-symbols--flash-on] text-sm"},null,-1),p("span",null,"快速创建",-1)])]),_:1})])])]),p("main",Wo,[N(Vo,{ref_key:"table",ref:s},null,512)])]))}};export{nr as default};
